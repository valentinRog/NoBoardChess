(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();function O(){}function ia(t){return t&&typeof t=="object"&&typeof t.then=="function"}function Ms(t){return t()}function jn(){return Object.create(null)}function De(t){t.forEach(Ms)}function Cs(t){return typeof t=="function"}function pe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let vt;function Pe(t,e){return vt||(vt=document.createElement("a")),vt.href=e,t===vt.href}function sa(t){return Object.keys(t).length===0}function Bt(t){return t==null?"":t}function w(t,e){t.appendChild(e)}function C(t,e,r){t.insertBefore(e,r||null)}function A(t){t.parentNode.removeChild(t)}function we(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function I(t){return document.createElement(t)}function H(t){return document.createTextNode(t)}function q(){return H(" ")}function js(){return H("")}function he(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function _(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function oa(t){return Array.from(t.childNodes)}function Re(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function zn(t,e,r,n){r===null?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":"")}function _e(t,e,r){t.classList[r?"add":"remove"](e)}let rt;function de(t){rt=t}function zs(){if(!rt)throw new Error("Function called outside component initialization");return rt}function Rs(t){zs().$$.on_mount.push(t)}const et=[],ce=[],zt=[],Cr=[],aa=Promise.resolve();let jr=!1;function ca(){jr||(jr=!0,aa.then(Yr))}function Gt(t){zt.push(t)}function Se(t){Cr.push(t)}const rr=new Set;let pt=0;function Yr(){const t=rt;do{for(;pt<et.length;){const e=et[pt];pt++,de(e),ua(e.$$)}for(de(null),et.length=0,pt=0;ce.length;)ce.pop()();for(let e=0;e<zt.length;e+=1){const r=zt[e];rr.has(r)||(rr.add(r),r())}zt.length=0}while(et.length);for(;Cr.length;)Cr.pop()();jr=!1,rr.clear(),de(t)}function ua(t){if(t.fragment!==null){t.update(),De(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Gt)}}const Rt=new Set;let Te;function it(){Te={r:0,c:[],p:Te}}function st(){Te.r||De(Te.c),Te=Te.p}function k(t,e){t&&t.i&&(Rt.delete(t),t.i(e))}function z(t,e,r,n){if(t&&t.o){if(Rt.has(t))return;Rt.add(t),Te.c.push(()=>{Rt.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}function Rn(t,e){const r=e.token={};function n(i,s,o,a){if(e.token!==r)return;e.resolved=a;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=a);const u=i&&(e.current=i)(c);let l=!1;e.block&&(e.blocks?e.blocks.forEach((h,d)=>{d!==s&&h&&(it(),z(h,1,1,()=>{e.blocks[d]===h&&(e.blocks[d]=null)}),st())}):e.block.d(1),u.c(),k(u,1),u.m(e.mount(),e.anchor),l=!0),e.block=u,e.blocks&&(e.blocks[s]=u),l&&Yr()}if(ia(t)){const i=zs();if(t.then(s=>{de(i),n(e.then,1,e.value,s),de(null)},s=>{if(de(i),n(e.catch,2,e.error,s),de(null),!e.hasCatch)throw s}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function la(t,e,r){const n=e.slice(),{resolved:i}=t;t.current===t.then&&(n[t.value]=i),t.current===t.catch&&(n[t.error]=i),t.block.p(n,r)}function Ie(t,e,r){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=r,r(t.$$.ctx[n]))}function ue(t){t&&t.c()}function ee(t,e,r,n){const{fragment:i,on_mount:s,on_destroy:o,after_update:a}=t.$$;i&&i.m(e,r),n||Gt(()=>{const c=s.map(Ms).filter(Cs);o?o.push(...c):De(c),t.$$.on_mount=[]}),a.forEach(Gt)}function te(t,e){const r=t.$$;r.fragment!==null&&(De(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function fa(t,e){t.$$.dirty[0]===-1&&(et.push(t),ca(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function me(t,e,r,n,i,s,o,a=[-1]){const c=rt;de(t);const u=t.$$={fragment:null,ctx:null,props:s,update:O,not_equal:i,bound:jn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:jn(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let l=!1;if(u.ctx=r?r(t,e.props||{},(h,d,...f)=>{const p=f.length?f[0]:d;return u.ctx&&i(u.ctx[h],u.ctx[h]=p)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](p),l&&fa(t,h)),d}):[],u.update(),l=!0,De(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const h=oa(e.target);u.fragment&&u.fragment.l(h),h.forEach(A)}else u.fragment&&u.fragment.c();e.intro&&k(t.$$.fragment),ee(t,e.target,e.anchor,e.customElement),Yr()}de(c)}class ge{$destroy(){te(this,1),this.$destroy=O}$on(e,r){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!sa(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ha="/noboardchess/assets/bB.84343e04.svg",da="/noboardchess/assets/bK.186176b8.svg",va="/noboardchess/assets/bN.6c4928db.svg",pa="/noboardchess/assets/bP.89f80ee0.svg",ma="/noboardchess/assets/bQ.15f463f8.svg",ga="/noboardchess/assets/bR.2fba8305.svg",ba="/noboardchess/assets/wB.c0601335.svg",ya="/noboardchess/assets/wK.30c2f3a3.svg",_a="/noboardchess/assets/wN.4a4a9130.svg",wa="/noboardchess/assets/wP.8129914a.svg",Sa="/noboardchess/assets/wQ.0b8ff35f.svg",Ia="/noboardchess/assets/wR.b3f64b75.svg";function qn(t,e,r){const n=t.slice();return n[3]=e[r],n}function Ln(t,e,r){const n=t.slice();return n[6]=e[r],n}function Fn(t,e,r){const n=t.slice();return n[9]=e[r],n}function Dn(t){let e,r=t[9]+"",n;return{c(){e=I("li"),n=H(r),_(e,"class","svelte-1rbu1ex")},m(i,s){C(i,e,s),w(e,n)},p:O,d(i){i&&A(e)}}}function Nn(t){let e,r,n,i,s,o=t[3].pieces[t[6]],a=[];for(let c=0;c<o.length;c+=1)a[c]=Dn(Fn(t,o,c));return{c(){e=I("div"),r=I("img"),i=q(),s=I("ul");for(let c=0;c<a.length;c+=1)a[c].c();Pe(r.src,n=t[0][t[6]])||_(r,"src",n),_(r,"alt",t[6]),_(r,"class","svelte-1rbu1ex"),_(s,"class","svelte-1rbu1ex"),_(e,"class",Bt(t[6])+" svelte-1rbu1ex")},m(c,u){C(c,e,u),w(e,r),w(e,i),w(e,s);for(let l=0;l<a.length;l+=1)a[l].m(s,null)},p(c,u){if(u&2){o=c[3].pieces[c[6]];let l;for(l=0;l<o.length;l+=1){const h=Fn(c,o,l);a[l]?a[l].p(h,u):(a[l]=Dn(h),a[l].c(),a[l].m(s,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=o.length}},d(c){c&&A(e),we(a,c)}}}function Bn(t){let e,r,n=Object.keys(t[3].pieces),i=[];for(let s=0;s<n.length;s+=1)i[s]=Nn(Ln(t,n,s));return{c(){e=I("div");for(let s=0;s<i.length;s+=1)i[s].c();r=q(),_(e,"class",t[3].color+" container svelte-1rbu1ex")},m(s,o){C(s,e,o);for(let a=0;a<i.length;a+=1)i[a].m(e,null);w(e,r)},p(s,o){if(o&3){n=Object.keys(s[3].pieces);let a;for(a=0;a<n.length;a+=1){const c=Ln(s,n,a);i[a]?i[a].p(c,o):(i[a]=Nn(c),i[a].c(),i[a].m(e,r))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(s){s&&A(e),we(i,s)}}}function $a(t){let e,r=t[1],n=[];for(let i=0;i<r.length;i+=1)n[i]=Bn(qn(t,r,i));return{c(){e=I("div");for(let i=0;i<n.length;i+=1)n[i].c();_(e,"id","pieces"),_(e,"class","svelte-1rbu1ex")},m(i,s){C(i,e,s);for(let o=0;o<n.length;o+=1)n[o].m(e,null)},p(i,[s]){if(s&3){r=i[1];let o;for(o=0;o<r.length;o+=1){const a=qn(i,r,o);n[o]?n[o].p(a,s):(n[o]=Bn(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},i:O,o:O,d(i){i&&A(e),we(n,i)}}}function Ea(t,e,r){let{pieces:n}=e;const i={b:ha,k:da,n:va,p:pa,q:ma,r:ga,B:ba,K:ya,N:_a,P:wa,Q:Sa,R:Ia};let s=[{color:"white",pieces:Object.fromEntries(Object.entries(n).filter(([o,a])=>o===o.toUpperCase()))},{color:"black",pieces:Object.fromEntries(Object.entries(n).filter(([o,a])=>o===o.toLowerCase()))}];return t.$$set=o=>{"pieces"in o&&r(2,n=o.pieces)},[i,s,n]}class Pa extends ge{constructor(e){super(),me(this,e,Ea,$a,pe,{pieces:2})}}function Ta(t){let e,r,n,i;return{c(){e=I("div"),r=H(t[3]),_(e,"class",Bt(t[4])+" svelte-yw0l3s"),_e(e,"active",t[0]===t[1]+1),_e(e,"failed",t[2]),_e(e,"pointer",t[0]!==null)},m(s,o){C(s,e,o),w(e,r),n||(i=he(e,"click",t[6]),n=!0)},p(s,[o]){o&8&&Re(r,s[3]),o&3&&_e(e,"active",s[0]===s[1]+1),o&4&&_e(e,"failed",s[2]),o&1&&_e(e,"pointer",s[0]!==null)},i:O,o:O,d(s){s&&A(e),n=!1,i()}}}function Oa(t,e,r){let{puzzle:n}=e,{moveIndex:i}=e,{activeFenIndex:s=null}=e,{failed:o=!1}=e,a="";const c=n.fens[i].split(" ")[1],u=d=>Number(d.split(" ").at(-1)),l=1+u(n.fens[i+1])-u(n.fens[1]);a+=String(l)+(c==="w"?".":"..."),a+=n.san_moves[i];const h=()=>{s!==null&&r(0,s=i+1)};return t.$$set=d=>{"puzzle"in d&&r(5,n=d.puzzle),"moveIndex"in d&&r(1,i=d.moveIndex),"activeFenIndex"in d&&r(0,s=d.activeFenIndex),"failed"in d&&r(2,o=d.failed)},[s,i,o,a,c,n,h]}class qs extends ge{constructor(e){super(),me(this,e,Oa,Ta,pe,{puzzle:5,moveIndex:1,activeFenIndex:0,failed:2})}}function Gn(t,e,r){const n=t.slice();return n[9]=e[r],n}function Un(t,e,r){const n=t.slice();return n[12]=e[r],n[14]=r,n}function Wn(t){let e,r,n,i;return r=new qs({props:{puzzle:t[0],moveIndex:t[14]}}),{c(){e=I("div"),ue(r.$$.fragment),n=q(),_(e,"class","svelte-i51za3")},m(s,o){C(s,e,o),ee(r,e,null),w(e,n),i=!0},p(s,o){const a={};o&1&&(a.puzzle=s[0]),r.$set(a)},i(s){i||(k(r.$$.fragment,s),i=!0)},o(s){z(r.$$.fragment,s),i=!1},d(s){s&&A(e),te(r)}}}function Hn(t){let e,r=t[9]+"",n,i,s;return{c(){e=I("button"),n=H(r)},m(o,a){C(o,e,a),w(e,n),i||(s=he(e,"click",function(){Cs(t[4](t[9]))&&t[4](t[9]).apply(this,arguments)}),i=!0)},p(o,a){t=o,a&4&&r!==(r=t[9]+"")&&Re(n,r)},d(o){o&&A(e),i=!1,s()}}}function xa(t){let e,r,n,i,s,o,a,c=t[3],u=[];for(let f=0;f<c.length;f+=1)u[f]=Wn(Un(t,c,f));const l=f=>z(u[f],1,1,()=>{u[f]=null});let h=t[2],d=[];for(let f=0;f<h.length;f+=1)d[f]=Hn(Gn(t,h,f));return{c(){e=I("div"),r=I("div");for(let f=0;f<u.length;f+=1)u[f].c();n=q(),i=I("div"),s=H(t[1]),o=q();for(let f=0;f<d.length;f+=1)d[f].c();_(r,"id","line"),_(r,"class","svelte-i51za3")},m(f,p){C(f,e,p),w(e,r);for(let v=0;v<u.length;v+=1)u[v].m(r,null);w(e,n),w(e,i),w(i,s),w(e,o);for(let v=0;v<d.length;v+=1)d[v].m(e,null);a=!0},p(f,[p]){if(p&9){c=f[3];let v;for(v=0;v<c.length;v+=1){const g=Un(f,c,v);u[v]?(u[v].p(g,p),k(u[v],1)):(u[v]=Wn(g),u[v].c(),k(u[v],1),u[v].m(r,null))}for(it(),v=c.length;v<u.length;v+=1)l(v);st()}if((!a||p&2)&&Re(s,f[1]),p&20){h=f[2];let v;for(v=0;v<h.length;v+=1){const g=Gn(f,h,v);d[v]?d[v].p(g,p):(d[v]=Hn(g),d[v].c(),d[v].m(e,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=h.length}},i(f){if(!a){for(let p=0;p<c.length;p+=1)k(u[p]);a=!0}},o(f){u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)z(u[p]);a=!1},d(f){f&&A(e),we(u,f),we(d,f)}}}function ka(t,e,r){let n,i,{puzzle:s}=e,{game:o}=e;o.failedMoveIndex=null;let a=1,c="";const u=()=>{let d=[];return a<s.legal_san_moves.length&&c!==n&&(s.legal_san_moves[a].forEach(f=>{f.startsWith(c)&&!d.includes(f[c.length])&&(d=[...d,f[c.length]])}),d=d.sort()),d};let l=u();const h=d=>()=>{if(d===n[c.length]){for(r(1,c+=d);u().length===1;)r(1,c+=u()[0]);c===n&&(r(6,a+=2),r(1,c=""),a>s.san_moves.length-1&&r(5,o.guessing=!1,o)),r(2,l=u())}else r(5,o.failedMoveIndex=a,o),r(5,o.fails++,o),r(5,o.guessing=!1,o)};return t.$$set=d=>{"puzzle"in d&&r(0,s=d.puzzle),"game"in d&&r(5,o=d.game)},t.$$.update=()=>{t.$$.dirty&65&&(n=s.san_moves[a]),t.$$.dirty&65&&r(3,i=s.san_moves.slice(0,a))},[s,c,l,i,h,o,a]}class Aa extends ge{constructor(e){super(),me(this,e,ka,xa,pe,{puzzle:0,game:5})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zr=function(t,e){return zr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},zr(t,e)};function Ma(t,e){zr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ae=function(){return ae=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ae.apply(this,arguments)};function Ee(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Ca(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}var ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N=function(t){try{return!!t()}catch{return!0}},ja=N,Qr=!ja(function(){var t=function(){}.bind();return typeof t!="function"||t.hasOwnProperty("prototype")}),Ls=Qr,Fs=Function.prototype,za=Fs.bind,Rr=Fs.call,Ra=Ls&&za.bind(Rr,Rr),R=Ls?function(t){return t&&Ra(t)}:function(t){return t&&function(){return Rr.apply(t,arguments)}},Ds=R,qa=Ds({}.toString),La=Ds("".slice),ot=function(t){return La(qa(t),8,-1)},Fa=R,Da=N,Na=ot,nr=Object,Ba=Fa("".split),Jr=Da(function(){return!nr("z").propertyIsEnumerable(0)})?function(t){return Na(t)=="String"?Ba(t,""):nr(t)}:nr,Ne=function(t){return t==null},Ga=Ne,Ua=TypeError,Zr=function(t){if(Ga(t))throw Ua("Can't call method on "+t);return t},Wa=Jr,Ha=Zr,Be=function(t){return Wa(Ha(t))},mt=function(t){return t&&t.Math==Math&&t},K=mt(typeof globalThis=="object"&&globalThis)||mt(typeof window=="object"&&window)||mt(typeof self=="object"&&self)||mt(typeof ze=="object"&&ze)||function(){return this}()||Function("return this")(),en={exports:{}},Vn=K,Va=Object.defineProperty,tn=function(t,e){try{Va(Vn,t,{value:e,configurable:!0,writable:!0})}catch{Vn[t]=e}return e},Xa=K,Ka=tn,Xn="__core-js_shared__",Ya=Xa[Xn]||Ka(Xn,{}),rn=Ya,Kn=rn;(en.exports=function(t,e){return Kn[t]||(Kn[t]=e!==void 0?e:{})})("versions",[]).push({version:"3.25.2",mode:"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.2/LICENSE",source:"https://github.com/zloirock/core-js"});var Qa=Zr,Ja=Object,at=function(t){return Ja(Qa(t))},Za=R,ec=at,tc=Za({}.hasOwnProperty),re=Object.hasOwn||function(e,r){return tc(ec(e),r)},rc=R,nc=0,ic=Math.random(),sc=rc(1 .toString),nn=function(t){return"Symbol("+(t===void 0?"":t)+")_"+sc(++nc+ic,36)},qr=typeof document=="object"&&document.all,oc=typeof qr>"u"&&qr!==void 0,Ns={all:qr,IS_HTMLDDA:oc},Bs=Ns,ac=Bs.all,L=Bs.IS_HTMLDDA?function(t){return typeof t=="function"||t===ac}:function(t){return typeof t=="function"},ir=K,cc=L,uc=function(t){return cc(t)?t:void 0},Ge=function(t,e){return arguments.length<2?uc(ir[t]):ir[t]&&ir[t][e]},lc=Ge,fc=lc("navigator","userAgent")||"",Gs=K,sr=fc,Yn=Gs.process,Qn=Gs.Deno,Jn=Yn&&Yn.versions||Qn&&Qn.version,Zn=Jn&&Jn.v8,Z,Ut;Zn&&(Z=Zn.split("."),Ut=Z[0]>0&&Z[0]<4?1:+(Z[0]+Z[1]));!Ut&&sr&&(Z=sr.match(/Edge\/(\d+)/),(!Z||Z[1]>=74)&&(Z=sr.match(/Chrome\/(\d+)/),Z&&(Ut=+Z[1])));var hc=Ut,ei=hc,dc=N,Us=!!Object.getOwnPropertySymbols&&!dc(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ei&&ei<41}),vc=Us,Ws=vc&&!Symbol.sham&&typeof Symbol.iterator=="symbol",pc=K,mc=en.exports,ti=re,gc=nn,ri=Us,Hs=Ws,Ae=mc("wks"),Oe=pc.Symbol,ni=Oe&&Oe.for,bc=Hs?Oe:Oe&&Oe.withoutSetter||gc,Y=function(t){if(!ti(Ae,t)||!(ri||typeof Ae[t]=="string")){var e="Symbol."+t;ri&&ti(Oe,t)?Ae[t]=Oe[t]:Hs&&ni?Ae[t]=ni(e):Ae[t]=bc(e)}return Ae[t]},ii=L,Vs=Ns,yc=Vs.all,G=Vs.IS_HTMLDDA?function(t){return typeof t=="object"?t!==null:ii(t)||t===yc}:function(t){return typeof t=="object"?t!==null:ii(t)},_c=G,wc=String,Sc=TypeError,le=function(t){if(_c(t))return t;throw Sc(wc(t)+" is not an object")},Xs={},Ic=N,Q=!Ic(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),$c=Q,Ec=N,Ks=$c&&Ec(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),J={},Pc=K,si=G,Lr=Pc.document,Tc=si(Lr)&&si(Lr.createElement),Ys=function(t){return Tc?Lr.createElement(t):{}},Oc=Q,xc=N,kc=Ys,Qs=!Oc&&!xc(function(){return Object.defineProperty(kc("div"),"a",{get:function(){return 7}}).a!=7}),Ac=Qr,gt=Function.prototype.call,be=Ac?gt.bind(gt):function(){return gt.apply(gt,arguments)},Mc=R,sn=Mc({}.isPrototypeOf),Cc=Ge,jc=L,zc=sn,Rc=Ws,qc=Object,Js=Rc?function(t){return typeof t=="symbol"}:function(t){var e=Cc("Symbol");return jc(e)&&zc(e.prototype,qc(t))},Lc=String,on=function(t){try{return Lc(t)}catch{return"Object"}},Fc=L,Dc=on,Nc=TypeError,an=function(t){if(Fc(t))return t;throw Nc(Dc(t)+" is not a function")},Bc=an,Gc=Ne,cn=function(t,e){var r=t[e];return Gc(r)?void 0:Bc(r)},or=be,ar=L,cr=G,Uc=TypeError,Wc=function(t,e){var r,n;if(e==="string"&&ar(r=t.toString)&&!cr(n=or(r,t))||ar(r=t.valueOf)&&!cr(n=or(r,t))||e!=="string"&&ar(r=t.toString)&&!cr(n=or(r,t)))return n;throw Uc("Can't convert object to primitive value")},Hc=be,oi=G,ai=Js,Vc=cn,Xc=Wc,Kc=Y,Yc=TypeError,Qc=Kc("toPrimitive"),Jc=function(t,e){if(!oi(t)||ai(t))return t;var r=Vc(t,Qc),n;if(r){if(e===void 0&&(e="default"),n=Hc(r,t,e),!oi(n)||ai(n))return n;throw Yc("Can't convert object to primitive value")}return e===void 0&&(e="number"),Xc(t,e)},Zc=Jc,eu=Js,un=function(t){var e=Zc(t,"string");return eu(e)?e:e+""},tu=Q,ru=Qs,nu=Ks,bt=le,ci=un,iu=TypeError,ur=Object.defineProperty,su=Object.getOwnPropertyDescriptor,lr="enumerable",fr="configurable",hr="writable";J.f=tu?nu?function(e,r,n){if(bt(e),r=ci(r),bt(n),typeof e=="function"&&r==="prototype"&&"value"in n&&hr in n&&!n[hr]){var i=su(e,r);i&&i[hr]&&(e[r]=n.value,n={configurable:fr in n?n[fr]:i[fr],enumerable:lr in n?n[lr]:i[lr],writable:!1})}return ur(e,r,n)}:ur:function(e,r,n){if(bt(e),r=ci(r),bt(n),ru)try{return ur(e,r,n)}catch{}if("get"in n||"set"in n)throw iu("Accessors not supported");return"value"in n&&(e[r]=n.value),e};var ou=Math.ceil,au=Math.floor,cu=Math.trunc||function(e){var r=+e;return(r>0?au:ou)(r)},uu=cu,ln=function(t){var e=+t;return e!==e||e===0?0:uu(e)},lu=ln,fu=Math.max,hu=Math.min,Zs=function(t,e){var r=lu(t);return r<0?fu(r+e,0):hu(r,e)},du=ln,vu=Math.min,pu=function(t){return t>0?vu(du(t),9007199254740991):0},mu=pu,ct=function(t){return mu(t.length)},gu=Be,bu=Zs,yu=ct,ui=function(t){return function(e,r,n){var i=gu(e),s=yu(i),o=bu(n,s),a;if(t&&r!=r){for(;s>o;)if(a=i[o++],a!=a)return!0}else for(;s>o;o++)if((t||o in i)&&i[o]===r)return t||o||0;return!t&&-1}},_u={includes:ui(!0),indexOf:ui(!1)},Yt={},wu=R,dr=re,Su=Be,Iu=_u.indexOf,$u=Yt,li=wu([].push),eo=function(t,e){var r=Su(t),n=0,i=[],s;for(s in r)!dr($u,s)&&dr(r,s)&&li(i,s);for(;e.length>n;)dr(r,s=e[n++])&&(~Iu(i,s)||li(i,s));return i},fn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Eu=eo,Pu=fn,to=Object.keys||function(e){return Eu(e,Pu)},Tu=Q,Ou=Ks,xu=J,ku=le,Au=Be,Mu=to;Xs.f=Tu&&!Ou?Object.defineProperties:function(e,r){ku(e);for(var n=Au(r),i=Mu(r),s=i.length,o=0,a;s>o;)xu.f(e,a=i[o++],n[a]);return e};var Cu=Ge,ju=Cu("document","documentElement"),zu=en.exports,Ru=nn,fi=zu("keys"),hn=function(t){return fi[t]||(fi[t]=Ru(t))},qu=le,Lu=Xs,hi=fn,Fu=Yt,Du=ju,Nu=Ys,Bu=hn,di=">",vi="<",Fr="prototype",Dr="script",ro=Bu("IE_PROTO"),vr=function(){},no=function(t){return vi+Dr+di+t+vi+"/"+Dr+di},pi=function(t){t.write(no("")),t.close();var e=t.parentWindow.Object;return t=null,e},Gu=function(){var t=Nu("iframe"),e="java"+Dr+":",r;return t.style.display="none",Du.appendChild(t),t.src=String(e),r=t.contentWindow.document,r.open(),r.write(no("document.F=Object")),r.close(),r.F},yt,qt=function(){try{yt=new ActiveXObject("htmlfile")}catch{}qt=typeof document<"u"?document.domain&&yt?pi(yt):Gu():pi(yt);for(var t=hi.length;t--;)delete qt[Fr][hi[t]];return qt()};Fu[ro]=!0;var dn=Object.create||function(e,r){var n;return e!==null?(vr[Fr]=qu(e),n=new vr,vr[Fr]=null,n[ro]=e):n=qt(),r===void 0?n:Lu.f(n,r)},Uu=Y,Wu=dn,Hu=J.f,Nr=Uu("unscopables"),Br=Array.prototype;Br[Nr]==null&&Hu(Br,Nr,{configurable:!0,value:Wu(null)});var Vu=function(t){Br[Nr][t]=!0},ut={},Xu=K,Ku=L,mi=Xu.WeakMap,io=Ku(mi)&&/native code/.test(String(mi)),Qt=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}},Yu=Q,Qu=J,Ju=Qt,vn=Yu?function(t,e,r){return Qu.f(t,e,Ju(1,r))}:function(t,e,r){return t[e]=r,t},Zu=io,so=K,pr=R,el=G,tl=vn,mr=re,gr=rn,rl=hn,nl=Yt,gi="Object already initialized",Gr=so.TypeError,il=so.WeakMap,Wt,nt,Ht,sl=function(t){return Ht(t)?nt(t):Wt(t,{})},ol=function(t){return function(e){var r;if(!el(e)||(r=nt(e)).type!==t)throw Gr("Incompatible receiver, "+t+" required");return r}};if(Zu||gr.state){var $e=gr.state||(gr.state=new il),al=pr($e.get),bi=pr($e.has),cl=pr($e.set);Wt=function(t,e){if(bi($e,t))throw Gr(gi);return e.facade=t,cl($e,t,e),e},nt=function(t){return al($e,t)||{}},Ht=function(t){return bi($e,t)}}else{var Me=rl("state");nl[Me]=!0,Wt=function(t,e){if(mr(t,Me))throw Gr(gi);return e.facade=t,tl(t,Me,e),e},nt=function(t){return mr(t,Me)?t[Me]:{}},Ht=function(t){return mr(t,Me)}}var Ue={set:Wt,get:nt,has:Ht,enforce:sl,getterFor:ol},pn={},mn={},oo={}.propertyIsEnumerable,ao=Object.getOwnPropertyDescriptor,ul=ao&&!oo.call({1:2},1);mn.f=ul?function(e){var r=ao(this,e);return!!r&&r.enumerable}:oo;var ll=Q,fl=be,hl=mn,dl=Qt,vl=Be,pl=un,ml=re,gl=Qs,yi=Object.getOwnPropertyDescriptor;pn.f=ll?yi:function(e,r){if(e=vl(e),r=pl(r),gl)try{return yi(e,r)}catch{}if(ml(e,r))return dl(!fl(hl.f,e,r),e[r])};var co={exports:{}},Ur=Q,bl=re,uo=Function.prototype,yl=Ur&&Object.getOwnPropertyDescriptor,gn=bl(uo,"name"),_l=gn&&function(){}.name==="something",wl=gn&&(!Ur||Ur&&yl(uo,"name").configurable),lo={EXISTS:gn,PROPER:_l,CONFIGURABLE:wl},Sl=R,Il=L,Wr=rn,$l=Sl(Function.toString);Il(Wr.inspectSource)||(Wr.inspectSource=function(t){return $l(t)});var fo=Wr.inspectSource,El=N,Pl=L,_t=re,Hr=Q,Tl=lo.CONFIGURABLE,Ol=fo,ho=Ue,xl=ho.enforce,kl=ho.get,Lt=Object.defineProperty,Al=Hr&&!El(function(){return Lt(function(){},"length",{value:8}).length!==8}),Ml=String(String).split("String"),Cl=co.exports=function(t,e,r){String(e).slice(0,7)==="Symbol("&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!_t(t,"name")||Tl&&t.name!==e)&&(Hr?Lt(t,"name",{value:e,configurable:!0}):t.name=e),Al&&r&&_t(r,"arity")&&t.length!==r.arity&&Lt(t,"length",{value:r.arity});try{r&&_t(r,"constructor")&&r.constructor?Hr&&Lt(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch{}var n=xl(t);return _t(n,"source")||(n.source=Ml.join(typeof e=="string"?e:"")),t};Function.prototype.toString=Cl(function(){return Pl(this)&&kl(this).source||Ol(this)},"toString");var jl=L,zl=J,Rl=co.exports,ql=tn,We=function(t,e,r,n){n||(n={});var i=n.enumerable,s=n.name!==void 0?n.name:e;if(jl(r)&&Rl(r,s,n),n.global)i?t[e]=r:ql(e,r);else{try{n.unsafe?t[e]&&(i=!0):delete t[e]}catch{}i?t[e]=r:zl.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},Jt={},Ll=eo,Fl=fn,Dl=Fl.concat("length","prototype");Jt.f=Object.getOwnPropertyNames||function(e){return Ll(e,Dl)};var bn={};bn.f=Object.getOwnPropertySymbols;var Nl=Ge,Bl=R,Gl=Jt,Ul=bn,Wl=le,Hl=Bl([].concat),Vl=Nl("Reflect","ownKeys")||function(e){var r=Gl.f(Wl(e)),n=Ul.f;return n?Hl(r,n(e)):r},_i=re,Xl=Vl,Kl=pn,Yl=J,Ql=function(t,e,r){for(var n=Xl(e),i=Yl.f,s=Kl.f,o=0;o<n.length;o++){var a=n[o];!_i(t,a)&&!(r&&_i(r,a))&&i(t,a,s(e,a))}},Jl=N,Zl=L,ef=/#|\.prototype\./,lt=function(t,e){var r=rf[tf(t)];return r==sf?!0:r==nf?!1:Zl(e)?Jl(e):!!e},tf=lt.normalize=function(t){return String(t).replace(ef,".").toLowerCase()},rf=lt.data={},nf=lt.NATIVE="N",sf=lt.POLYFILL="P",vo=lt,br=K,of=pn.f,af=vn,cf=We,uf=tn,lf=Ql,ff=vo,ft=function(t,e){var r=t.target,n=t.global,i=t.stat,s,o,a,c,u,l;if(n?o=br:i?o=br[r]||uf(r,{}):o=(br[r]||{}).prototype,o)for(a in e){if(u=e[a],t.dontCallGetSet?(l=of(o,a),c=l&&l.value):c=o[a],s=ff(n?a:r+(i?".":"#")+a,t.forced),!s&&c!==void 0){if(typeof u==typeof c)continue;lf(u,c)}(t.sham||c&&c.sham)&&af(u,"sham",!0),cf(o,a,u,t)}},hf=N,df=!hf(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),vf=re,pf=L,mf=at,gf=hn,bf=df,wi=gf("IE_PROTO"),Vr=Object,yf=Vr.prototype,po=bf?Vr.getPrototypeOf:function(t){var e=mf(t);if(vf(e,wi))return e[wi];var r=e.constructor;return pf(r)&&e instanceof r?r.prototype:e instanceof Vr?yf:null},_f=N,wf=L,Sf=G,Si=po,If=We,$f=Y,Xr=$f("iterator"),mo=!1,xe,yr,_r;[].keys&&(_r=[].keys(),"next"in _r?(yr=Si(Si(_r)),yr!==Object.prototype&&(xe=yr)):mo=!0);var Ef=!Sf(xe)||_f(function(){var t={};return xe[Xr].call(t)!==t});Ef&&(xe={});wf(xe[Xr])||If(xe,Xr,function(){return this});var go={IteratorPrototype:xe,BUGGY_SAFARI_ITERATORS:mo},Pf=J.f,Tf=re,Of=Y,Ii=Of("toStringTag"),yn=function(t,e,r){t&&!r&&(t=t.prototype),t&&!Tf(t,Ii)&&Pf(t,Ii,{configurable:!0,value:e})},xf=go.IteratorPrototype,kf=dn,Af=Qt,Mf=yn,Cf=ut,jf=function(){return this},zf=function(t,e,r,n){var i=e+" Iterator";return t.prototype=kf(xf,{next:Af(+!n,r)}),Mf(t,i,!1),Cf[i]=jf,t},Rf=L,qf=String,Lf=TypeError,Ff=function(t){if(typeof t=="object"||Rf(t))return t;throw Lf("Can't set "+qf(t)+" as a prototype")},Df=R,Nf=le,Bf=Ff,bo=Object.setPrototypeOf||("__proto__"in{}?function(){var t=!1,e={},r;try{r=Df(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),r(e,[]),t=e instanceof Array}catch{}return function(i,s){return Nf(i),Bf(s),t?r(i,s):i.__proto__=s,i}}():void 0),Gf=ft,Uf=be,yo=lo,Wf=L,Hf=zf,$i=po,Ei=bo,Vf=yn,Xf=vn,wr=We,Kf=Y,Yf=ut,_o=go,Qf=yo.PROPER,Jf=yo.CONFIGURABLE,Pi=_o.IteratorPrototype,wt=_o.BUGGY_SAFARI_ITERATORS,Ve=Kf("iterator"),Ti="keys",Xe="values",Oi="entries",Zf=function(){return this},_n=function(t,e,r,n,i,s,o){Hf(r,e,n);var a=function(b){if(b===i&&d)return d;if(!wt&&b in l)return l[b];switch(b){case Ti:return function(){return new r(this,b)};case Xe:return function(){return new r(this,b)};case Oi:return function(){return new r(this,b)}}return function(){return new r(this)}},c=e+" Iterator",u=!1,l=t.prototype,h=l[Ve]||l["@@iterator"]||i&&l[i],d=!wt&&h||a(i),f=e=="Array"&&l.entries||h,p,v,g;if(f&&(p=$i(f.call(new t)),p!==Object.prototype&&p.next&&($i(p)!==Pi&&(Ei?Ei(p,Pi):Wf(p[Ve])||wr(p,Ve,Zf)),Vf(p,c,!0))),Qf&&i==Xe&&h&&h.name!==Xe&&(Jf?Xf(l,"name",Xe):(u=!0,d=function(){return Uf(h,this)})),i)if(v={values:a(Xe),keys:s?d:a(Ti),entries:a(Oi)},o)for(g in v)(wt||u||!(g in l))&&wr(l,g,v[g]);else Gf({target:e,proto:!0,forced:wt||u},v);return l[Ve]!==d&&wr(l,Ve,d,{name:i}),Yf[e]=d,v},wn=function(t,e){return{value:t,done:e}},eh=Be,Sn=Vu,xi=ut,wo=Ue,th=J.f,rh=_n,St=wn,nh=Q,So="Array Iterator",ih=wo.set,sh=wo.getterFor(So);rh(Array,"Array",function(t,e){ih(this,{type:So,target:eh(t),index:0,kind:e})},function(){var t=sh(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,St(void 0,!0)):r=="keys"?St(n,!1):r=="values"?St(e[n],!1):St([n,e[n]],!1)},"values");var ki=xi.Arguments=xi.Array;Sn("keys");Sn("values");Sn("entries");if(nh&&ki.name!=="values")try{th(ki,"name",{value:"values"})}catch{}var ht={exports:{}},Io={},oh=un,ah=J,ch=Qt,$o=function(t,e,r){var n=oh(e);n in t?ah.f(t,n,ch(0,r)):t[n]=r},Ai=Zs,uh=ct,lh=$o,fh=Array,hh=Math.max,dh=function(t,e,r){for(var n=uh(t),i=Ai(e,n),s=Ai(r===void 0?n:r,n),o=fh(hh(s-i,0)),a=0;i<s;i++,a++)lh(o,a,t[i]);return o.length=a,o},vh=ot,ph=Be,Eo=Jt.f,mh=dh,Po=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],gh=function(t){try{return Eo(t)}catch{return mh(Po)}};Io.f=function(e){return Po&&vh(e)=="Window"?gh(e):Eo(ph(e))};var bh=N,yh=bh(function(){if(typeof ArrayBuffer=="function"){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}),_h=N,wh=G,Sh=ot,Mi=yh,Ft=Object.isExtensible,Ih=_h(function(){Ft(1)}),To=Ih||Mi?function(e){return!wh(e)||Mi&&Sh(e)=="ArrayBuffer"?!1:Ft?Ft(e):!0}:Ft,$h=N,Eh=!$h(function(){return Object.isExtensible(Object.preventExtensions({}))}),Ph=ft,Th=R,Oh=Yt,xh=G,In=re,kh=J.f,Ci=Jt,Ah=Io,$n=To,Mh=nn,Ch=Eh,Oo=!1,ve=Mh("meta"),jh=0,En=function(t){kh(t,ve,{value:{objectID:"O"+jh++,weakData:{}}})},zh=function(t,e){if(!xh(t))return typeof t=="symbol"?t:(typeof t=="string"?"S":"P")+t;if(!In(t,ve)){if(!$n(t))return"F";if(!e)return"E";En(t)}return t[ve].objectID},Rh=function(t,e){if(!In(t,ve)){if(!$n(t))return!0;if(!e)return!1;En(t)}return t[ve].weakData},qh=function(t){return Ch&&Oo&&$n(t)&&!In(t,ve)&&En(t),t},Lh=function(){Fh.enable=function(){},Oo=!0;var t=Ci.f,e=Th([].splice),r={};r[ve]=1,t(r).length&&(Ci.f=function(n){for(var i=t(n),s=0,o=i.length;s<o;s++)if(i[s]===ve){e(i,s,1);break}return i},Ph({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Ah.f}))},Fh=ht.exports={enable:Lh,fastKey:zh,getWeakData:Rh,onFreeze:qh};Oh[ve]=!0;var ji=R,Dh=an,Nh=Qr,Bh=ji(ji.bind),Zt=function(t,e){return Dh(t),e===void 0?t:Nh?Bh(t,e):function(){return t.apply(e,arguments)}},Gh=Y,Uh=ut,Wh=Gh("iterator"),Hh=Array.prototype,xo=function(t){return t!==void 0&&(Uh.Array===t||Hh[Wh]===t)},Vh=Y,Xh=Vh("toStringTag"),ko={};ko[Xh]="z";var Pn=String(ko)==="[object z]",Kh=Pn,Yh=L,Dt=ot,Qh=Y,Jh=Qh("toStringTag"),Zh=Object,ed=Dt(function(){return arguments}())=="Arguments",td=function(t,e){try{return t[e]}catch{}},er=Kh?Dt:function(t){var e,r,n;return t===void 0?"Undefined":t===null?"Null":typeof(r=td(e=Zh(t),Jh))=="string"?r:ed?Dt(e):(n=Dt(e))=="Object"&&Yh(e.callee)?"Arguments":n},rd=er,zi=cn,nd=Ne,id=ut,sd=Y,od=sd("iterator"),Tn=function(t){if(!nd(t))return zi(t,od)||zi(t,"@@iterator")||id[rd(t)]},ad=be,cd=an,ud=le,ld=on,fd=Tn,hd=TypeError,Ao=function(t,e){var r=arguments.length<2?fd(t):e;if(cd(r))return ud(ad(r,t));throw hd(ld(t)+" is not iterable")},dd=be,Ri=le,vd=cn,Mo=function(t,e,r){var n,i;Ri(t);try{if(n=vd(t,"return"),!n){if(e==="throw")throw r;return r}n=dd(n,t)}catch(s){i=!0,n=s}if(e==="throw")throw r;if(i)throw n;return Ri(n),r},pd=Zt,md=be,gd=le,bd=on,yd=xo,_d=ct,qi=sn,wd=Ao,Sd=Tn,Li=Mo,Id=TypeError,Nt=function(t,e){this.stopped=t,this.result=e},Fi=Nt.prototype,On=function(t,e,r){var n=r&&r.that,i=!!(r&&r.AS_ENTRIES),s=!!(r&&r.IS_RECORD),o=!!(r&&r.IS_ITERATOR),a=!!(r&&r.INTERRUPTED),c=pd(e,n),u,l,h,d,f,p,v,g=function(m){return u&&Li(u,"normal",m),new Nt(!0,m)},b=function(m){return i?(gd(m),a?c(m[0],m[1],g):c(m[0],m[1])):a?c(m,g):c(m)};if(s)u=t.iterator;else if(o)u=t;else{if(l=Sd(t),!l)throw Id(bd(t)+" is not iterable");if(yd(l)){for(h=0,d=_d(t);d>h;h++)if(f=b(t[h]),f&&qi(Fi,f))return f;return new Nt(!1)}u=wd(t,l)}for(p=s?t.next:u.next;!(v=md(p,u)).done;){try{f=b(v.value)}catch(m){Li(u,"throw",m)}if(typeof f=="object"&&f&&qi(Fi,f))return f}return new Nt(!1)},$d=sn,Ed=TypeError,xn=function(t,e){if($d(e,t))return t;throw Ed("Incorrect invocation")},Pd=Y,Co=Pd("iterator"),jo=!1;try{var Td=0,Di={next:function(){return{done:!!Td++}},return:function(){jo=!0}};Di[Co]=function(){return this},Array.from(Di,function(){throw 2})}catch{}var zo=function(t,e){if(!e&&!jo)return!1;var r=!1;try{var n={};n[Co]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch{}return r},Od=L,xd=G,Ni=bo,kd=function(t,e,r){var n,i;return Ni&&Od(n=e.constructor)&&n!==r&&xd(i=n.prototype)&&i!==r.prototype&&Ni(t,i),t},Ad=ft,Md=K,Cd=R,Bi=vo,jd=We,zd=ht.exports,Rd=On,qd=xn,Ld=L,Fd=Ne,Sr=G,Ir=N,Dd=zo,Nd=yn,Bd=kd,kn=function(t,e,r){var n=t.indexOf("Map")!==-1,i=t.indexOf("Weak")!==-1,s=n?"set":"add",o=Md[t],a=o&&o.prototype,c=o,u={},l=function(b){var m=Cd(a[b]);jd(a,b,b=="add"?function($){return m(this,$===0?0:$),this}:b=="delete"?function(S){return i&&!Sr(S)?!1:m(this,S===0?0:S)}:b=="get"?function($){return i&&!Sr($)?void 0:m(this,$===0?0:$)}:b=="has"?function($){return i&&!Sr($)?!1:m(this,$===0?0:$)}:function($,D){return m(this,$===0?0:$,D),this})},h=Bi(t,!Ld(o)||!(i||a.forEach&&!Ir(function(){new o().entries().next()})));if(h)c=r.getConstructor(e,t,n,s),zd.enable();else if(Bi(t,!0)){var d=new c,f=d[s](i?{}:-0,1)!=d,p=Ir(function(){d.has(1)}),v=Dd(function(b){new o(b)}),g=!i&&Ir(function(){for(var b=new o,m=5;m--;)b[s](m,m);return!b.has(-0)});v||(c=e(function(b,m){qd(b,a);var S=Bd(new o,b,c);return Fd(m)||Rd(m,S[s],{that:S,AS_ENTRIES:n}),S}),c.prototype=a,a.constructor=c),(p||g)&&(l("delete"),l("has"),n&&l("get")),(g||f)&&l(s),i&&a.clear&&delete a.clear}return u[t]=c,Ad({global:!0,constructor:!0,forced:c!=o},u),Nd(c,t),i||r.setStrong(c,t,n),c},Gd=We,An=function(t,e,r){for(var n in e)Gd(t,n,e[n],r);return t},Ud=Ge,Wd=J,Hd=Y,Vd=Q,Gi=Hd("species"),Xd=function(t){var e=Ud(t),r=Wd.f;Vd&&e&&!e[Gi]&&r(e,Gi,{configurable:!0,get:function(){return this}})},Kd=J.f,Yd=dn,Ui=An,Qd=Zt,Jd=xn,Zd=Ne,ev=On,tv=_n,It=wn,rv=Xd,Ke=Q,Wi=ht.exports.fastKey,Ro=Ue,Hi=Ro.set,$r=Ro.getterFor,qo={getConstructor:function(t,e,r,n){var i=t(function(u,l){Jd(u,s),Hi(u,{type:e,index:Yd(null),first:void 0,last:void 0,size:0}),Ke||(u.size=0),Zd(l)||ev(l,u[n],{that:u,AS_ENTRIES:r})}),s=i.prototype,o=$r(e),a=function(u,l,h){var d=o(u),f=c(u,l),p,v;return f?f.value=h:(d.last=f={index:v=Wi(l,!0),key:l,value:h,previous:p=d.last,next:void 0,removed:!1},d.first||(d.first=f),p&&(p.next=f),Ke?d.size++:u.size++,v!=="F"&&(d.index[v]=f)),u},c=function(u,l){var h=o(u),d=Wi(l),f;if(d!=="F")return h.index[d];for(f=h.first;f;f=f.next)if(f.key==l)return f};return Ui(s,{clear:function(){for(var l=this,h=o(l),d=h.index,f=h.first;f;)f.removed=!0,f.previous&&(f.previous=f.previous.next=void 0),delete d[f.index],f=f.next;h.first=h.last=void 0,Ke?h.size=0:l.size=0},delete:function(u){var l=this,h=o(l),d=c(l,u);if(d){var f=d.next,p=d.previous;delete h.index[d.index],d.removed=!0,p&&(p.next=f),f&&(f.previous=p),h.first==d&&(h.first=f),h.last==d&&(h.last=p),Ke?h.size--:l.size--}return!!d},forEach:function(l){for(var h=o(this),d=Qd(l,arguments.length>1?arguments[1]:void 0),f;f=f?f.next:h.first;)for(d(f.value,f.key,this);f&&f.removed;)f=f.previous},has:function(l){return!!c(this,l)}}),Ui(s,r?{get:function(l){var h=c(this,l);return h&&h.value},set:function(l,h){return a(this,l===0?0:l,h)}}:{add:function(l){return a(this,l=l===0?0:l,l)}}),Ke&&Kd(s,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,r){var n=e+" Iterator",i=$r(e),s=$r(n);tv(t,e,function(o,a){Hi(this,{type:n,target:o,state:i(o),kind:a,last:void 0})},function(){for(var o=s(this),a=o.kind,c=o.last;c&&c.removed;)c=c.previous;return!o.target||!(o.last=c=c?c.next:o.state.first)?(o.target=void 0,It(void 0,!0)):a=="keys"?It(c.key,!1):a=="values"?It(c.value,!1):It([c.key,c.value],!1)},r?"entries":"values",!r,!0),rv(e)}},nv=kn,iv=qo;nv("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},iv);var sv=Pn,ov=er,av=sv?{}.toString:function(){return"[object "+ov(this)+"]"},cv=Pn,uv=We,lv=av;cv||uv(Object.prototype,"toString",lv,{unsafe:!0});var fv=er,hv=String,Lo=function(t){if(fv(t)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return hv(t)},Mn=R,dv=ln,vv=Lo,pv=Zr,mv=Mn("".charAt),Vi=Mn("".charCodeAt),gv=Mn("".slice),Xi=function(t){return function(e,r){var n=vv(pv(e)),i=dv(r),s=n.length,o,a;return i<0||i>=s?t?"":void 0:(o=Vi(n,i),o<55296||o>56319||i+1===s||(a=Vi(n,i+1))<56320||a>57343?t?mv(n,i):o:t?gv(n,i,i+2):(o-55296<<10)+(a-56320)+65536)}},bv={codeAt:Xi(!1),charAt:Xi(!0)},yv=bv.charAt,_v=Lo,Fo=Ue,wv=_n,Ki=wn,Do="String Iterator",Sv=Fo.set,Iv=Fo.getterFor(Do);wv(String,"String",function(t){Sv(this,{type:Do,string:_v(t),index:0})},function(){var e=Iv(this),r=e.string,n=e.index,i;return n>=r.length?Ki(void 0,!0):(i=yv(r,n),e.index+=i.length,Ki(i,!1))});var $v=K,dt=$v,Ev=dt;Ev.Map;var Pv=kn,Tv=qo;Pv("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Tv);var Ov=dt;Ov.Set;var xv=ot,kv=Array.isArray||function(e){return xv(e)=="Array"},Av=R,Mv=N,No=L,Cv=er,jv=Ge,zv=fo,Bo=function(){},Rv=[],Go=jv("Reflect","construct"),Cn=/^\s*(?:class|function)\b/,qv=Av(Cn.exec),Lv=!Cn.exec(Bo),Ye=function(e){if(!No(e))return!1;try{return Go(Bo,Rv,e),!0}catch{return!1}},Uo=function(e){if(!No(e))return!1;switch(Cv(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Lv||!!qv(Cn,zv(e))}catch{return!0}};Uo.sham=!0;var Wo=!Go||Mv(function(){var t;return Ye(Ye.call)||!Ye(Object)||!Ye(function(){t=!0})||t})?Uo:Ye,Yi=kv,Fv=Wo,Dv=G,Nv=Y,Bv=Nv("species"),Qi=Array,Gv=function(t){var e;return Yi(t)&&(e=t.constructor,Fv(e)&&(e===Qi||Yi(e.prototype))?e=void 0:Dv(e)&&(e=e[Bv],e===null&&(e=void 0))),e===void 0?Qi:e},Uv=Gv,Wv=function(t,e){return new(Uv(t))(e===0?0:e)},Hv=Zt,Vv=R,Xv=Jr,Kv=at,Yv=ct,Qv=Wv,Ji=Vv([].push),ye=function(t){var e=t==1,r=t==2,n=t==3,i=t==4,s=t==6,o=t==7,a=t==5||s;return function(c,u,l,h){for(var d=Kv(c),f=Xv(d),p=Hv(u,l),v=Yv(f),g=0,b=h||Qv,m=e?b(c,v):r||o?b(c,0):void 0,S,$;v>g;g++)if((a||g in f)&&(S=f[g],$=p(S,g,d),t))if(e)m[g]=$;else if($)switch(t){case 3:return!0;case 5:return S;case 6:return g;case 2:Ji(m,S)}else switch(t){case 4:return!1;case 7:Ji(m,S)}return s?-1:n||i?i:m}},Jv={forEach:ye(0),map:ye(1),filter:ye(2),some:ye(3),every:ye(4),find:ye(5),findIndex:ye(6),filterReject:ye(7)},Zv=R,Zi=An,$t=ht.exports.getWeakData,ep=xn,tp=le,rp=Ne,Er=G,np=On,Ho=Jv,es=re,Vo=Ue,ip=Vo.set,sp=Vo.getterFor,op=Ho.find,ap=Ho.findIndex,cp=Zv([].splice),up=0,Et=function(t){return t.frozen||(t.frozen=new Xo)},Xo=function(){this.entries=[]},Pr=function(t,e){return op(t.entries,function(r){return r[0]===e})};Xo.prototype={get:function(t){var e=Pr(this,t);if(e)return e[1]},has:function(t){return!!Pr(this,t)},set:function(t,e){var r=Pr(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(t){var e=ap(this.entries,function(r){return r[0]===t});return~e&&cp(this.entries,e,1),!!~e}};var lp={getConstructor:function(t,e,r,n){var i=t(function(c,u){ep(c,s),ip(c,{type:e,id:up++,frozen:void 0}),rp(u)||np(u,c[n],{that:c,AS_ENTRIES:r})}),s=i.prototype,o=sp(e),a=function(c,u,l){var h=o(c),d=$t(tp(u),!0);return d===!0?Et(h).set(u,l):d[h.id]=l,c};return Zi(s,{delete:function(c){var u=o(this);if(!Er(c))return!1;var l=$t(c);return l===!0?Et(u).delete(c):l&&es(l,u.id)&&delete l[u.id]},has:function(u){var l=o(this);if(!Er(u))return!1;var h=$t(u);return h===!0?Et(l).has(u):h&&es(h,l.id)}}),Zi(s,r?{get:function(u){var l=o(this);if(Er(u)){var h=$t(u);return h===!0?Et(l).get(u):h?h[l.id]:void 0}},set:function(u,l){return a(this,u,l)}}:{add:function(u){return a(this,u,!0)}}),i}},ts=K,Pt=R,fp=An,hp=ht.exports,dp=kn,Ko=lp,Tt=G,Ot=To,xt=Ue.enforce,vp=io,pp=!ts.ActiveXObject&&"ActiveXObject"in ts,Qe,Yo=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},mp=dp("WeakMap",Yo,Ko);if(vp&&pp){Qe=Ko.getConstructor(Yo,"WeakMap",!0),hp.enable();var Je=mp.prototype,rs=Pt(Je.delete),kt=Pt(Je.has),ns=Pt(Je.get),is=Pt(Je.set);fp(Je,{delete:function(t){if(Tt(t)&&!Ot(t)){var e=xt(this);return e.frozen||(e.frozen=new Qe),rs(this,t)||e.frozen.delete(t)}return rs(this,t)},has:function(e){if(Tt(e)&&!Ot(e)){var r=xt(this);return r.frozen||(r.frozen=new Qe),kt(this,e)||r.frozen.has(e)}return kt(this,e)},get:function(e){if(Tt(e)&&!Ot(e)){var r=xt(this);return r.frozen||(r.frozen=new Qe),kt(this,e)?ns(this,e):r.frozen.get(e)}return ns(this,e)},set:function(e,r){if(Tt(e)&&!Ot(e)){var n=xt(this);n.frozen||(n.frozen=new Qe),kt(this,e)?is(this,e,r):n.frozen.set(e,r)}else is(this,e,r);return this}})}var gp=dt;gp.WeakMap;var bp=le,yp=Mo,_p=function(t,e,r,n){try{return n?e(bp(r)[0],r[1]):e(r)}catch(i){yp(t,"throw",i)}},wp=Zt,Sp=be,Ip=at,$p=_p,Ep=xo,Pp=Wo,Tp=ct,ss=$o,Op=Ao,xp=Tn,os=Array,kp=function(e){var r=Ip(e),n=Pp(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=wp(s,i>2?arguments[2]:void 0));var a=xp(r),c=0,u,l,h,d,f,p;if(a&&!(this===os&&Ep(a)))for(d=Op(r,a),f=d.next,l=n?new this:[];!(h=Sp(f,d)).done;c++)p=o?$p(d,s,[h.value,c],!0):h.value,ss(l,c,p);else for(u=Tp(r),l=n?new this(u):os(u);u>c;c++)p=o?s(r[c],c):r[c],ss(l,c,p);return l.length=c,l},Ap=ft,Mp=kp,Cp=zo,jp=!Cp(function(t){Array.from(t)});Ap({target:"Array",stat:!0,forced:jp},{from:Mp});var zp=dt;zp.Array.from;var as=Q,Rp=R,qp=be,Lp=N,Tr=to,Fp=bn,Dp=mn,Np=at,Bp=Jr,Ce=Object.assign,cs=Object.defineProperty,Gp=Rp([].concat),Up=!Ce||Lp(function(){if(as&&Ce({b:1},Ce(cs({},"a",{enumerable:!0,get:function(){cs(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(i){e[i]=i}),Ce({},t)[r]!=7||Tr(Ce({},e)).join("")!=n})?function(e,r){for(var n=Np(e),i=arguments.length,s=1,o=Fp.f,a=Dp.f;i>s;)for(var c=Bp(arguments[s++]),u=o?Gp(Tr(c),o(c)):Tr(c),l=u.length,h=0,d;l>h;)d=u[h++],(!as||qp(a,c,d))&&(n[d]=c[d]);return n}:Ce,Wp=ft,us=Up;Wp({target:"Object",stat:!0,arity:2,forced:Object.assign!==us},{assign:us});var Hp=dt;Hp.Object.assign;var ls=0/0,Vp="[object Symbol]",Xp=/^\s+|\s+$/g,Kp=/^[-+]0x[0-9a-f]+$/i,Yp=/^0b[01]+$/i,Qp=/^0o[0-7]+$/i,Jp=parseInt,Zp=Object.prototype,em=Zp.toString;function tm(t,e,r){return t===t&&(r!==void 0&&(t=t<=r?t:r),e!==void 0&&(t=t>=e?t:e)),t}function fs(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function rm(t){return!!t&&typeof t=="object"}function nm(t){return typeof t=="symbol"||rm(t)&&em.call(t)==Vp}function Or(t){if(typeof t=="number")return t;if(nm(t))return ls;if(fs(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=fs(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Xp,"");var r=Yp.test(t);return r||Qp.test(t)?Jp(t.slice(2),r?2:8):Kp.test(t)?ls:+t}function im(t,e,r){return r===void 0&&(r=e,e=void 0),r!==void 0&&(r=Or(r),r=r===r?r:0),e!==void 0&&(e=Or(e),e=e===e?e:0),tm(Or(t),e,r)}var X=im;function hs(t,e){return t===void 0&&(t=-1/0),e===void 0&&(e=1/0),function(r,n){var i="_"+n;Object.defineProperty(r,n,{get:function(){return this[i]},set:function(s){Object.defineProperty(this,i,{value:X(s,t,e),enumerable:!1,writable:!0,configurable:!0})},enumerable:!0,configurable:!0})}}function xr(t,e){var r="_"+e;Object.defineProperty(t,e,{get:function(){return this[r]},set:function(n){Object.defineProperty(this,r,{value:!!n,enumerable:!1,writable:!0,configurable:!0})},enumerable:!0,configurable:!0})}var sm="Expected a function",ds=0/0,om="[object Symbol]",am=/^\s+|\s+$/g,cm=/^[-+]0x[0-9a-f]+$/i,um=/^0b[01]+$/i,lm=/^0o[0-7]+$/i,fm=parseInt,hm=typeof ze=="object"&&ze&&ze.Object===Object&&ze,dm=typeof self=="object"&&self&&self.Object===Object&&self,vm=hm||dm||Function("return this")(),pm=Object.prototype,mm=pm.toString,gm=Math.max,bm=Math.min,kr=function(){return vm.Date.now()};function ym(t,e,r){var n,i,s,o,a,c,u=0,l=!1,h=!1,d=!0;if(typeof t!="function")throw new TypeError(sm);e=vs(e)||0,Kr(r)&&(l=!!r.leading,h="maxWait"in r,s=h?gm(vs(r.maxWait)||0,e):s,d="trailing"in r?!!r.trailing:d);function f(T){var x=n,U=i;return n=i=void 0,u=T,o=t.apply(U,x),o}function p(T){return u=T,a=setTimeout(b,e),l?f(T):o}function v(T){var x=T-c,U=T-u,F=e-x;return h?bm(F,s-U):F}function g(T){var x=T-c,U=T-u;return c===void 0||x>=e||x<0||h&&U>=s}function b(){var T=kr();if(g(T))return m(T);a=setTimeout(b,v(T))}function m(T){return a=void 0,d&&n?f(T):(n=i=void 0,o)}function S(){a!==void 0&&clearTimeout(a),u=0,n=c=i=a=void 0}function $(){return a===void 0?o:m(kr())}function D(){var T=kr(),x=g(T);if(n=arguments,i=this,c=T,x){if(a===void 0)return p(c);if(h)return a=setTimeout(b,e),f(c)}return a===void 0&&(a=setTimeout(b,e)),o}return D.cancel=S,D.flush=$,D}function Kr(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function _m(t){return!!t&&typeof t=="object"}function wm(t){return typeof t=="symbol"||_m(t)&&mm.call(t)==om}function vs(t){if(typeof t=="number")return t;if(wm(t))return ds;if(Kr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Kr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(am,"");var r=um.test(t);return r||lm.test(t)?fm(t.slice(2),r?2:8):cm.test(t)?ds:+t}var Qo=ym;function Jo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r,n,i){var s=i.value;return{get:function(){return this.hasOwnProperty(n)||Object.defineProperty(this,n,{value:Qo.apply(void 0,Ca([s],t))}),this[n]}}}}var Sm=function(){function t(e){var r=this;e===void 0&&(e={}),this.damping=.1,this.thumbMinSize=20,this.renderByPixels=!0,this.alwaysShowTracks=!1,this.continuousScrolling=!0,this.delegateTo=null,this.plugins={},Object.keys(e).forEach(function(n){r[n]=e[n]})}return Object.defineProperty(t.prototype,"wheelEventTarget",{get:function(){return this.delegateTo},set:function(e){console.warn("[smooth-scrollbar]: `options.wheelEventTarget` is deprecated and will be removed in the future, use `options.delegateTo` instead."),this.delegateTo=e},enumerable:!0,configurable:!0}),Ee([hs(0,1)],t.prototype,"damping",void 0),Ee([hs(0,1/0)],t.prototype,"thumbMinSize",void 0),Ee([xr],t.prototype,"renderByPixels",void 0),Ee([xr],t.prototype,"alwaysShowTracks",void 0),Ee([xr],t.prototype,"continuousScrolling",void 0),t}(),At,Vt=new WeakMap;function Zo(){if(At!==void 0)return At;var t=!1;try{var e=function(){},r=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",e,r),window.removeEventListener("testPassive",e,r)}catch{}return At=t?{passive:!1}:!1,At}function He(t){var e=Vt.get(t)||[];return Vt.set(t,e),function(n,i,s){function o(a){a.defaultPrevented||s(a)}i.split(/\s+/g).forEach(function(a){e.push({elem:n,eventName:a,handler:o}),n.addEventListener(a,o,Zo())})}}function Im(t){var e=Vt.get(t);!e||(e.forEach(function(r){var n=r.elem,i=r.eventName,s=r.handler;n.removeEventListener(i,s,Zo())}),Vt.delete(t))}function $m(t){return t.touches?t.touches[t.touches.length-1]:t}function qe(t){var e=$m(t);return{x:e.clientX,y:e.clientY}}function Mt(t,e){return e===void 0&&(e=[]),e.some(function(r){return t===r})}var ea=["webkit","moz","ms","o"],Em=new RegExp("^-(?!(?:"+ea.join("|")+")-)");function Pm(t){var e={};return Object.keys(t).forEach(function(r){if(!Em.test(r)){e[r]=t[r];return}var n=t[r];r=r.replace(/^-/,""),e[r]=n,ea.forEach(function(i){e["-"+i+"-"+r]=n})}),e}function ke(t,e){e=Pm(e),Object.keys(e).forEach(function(r){var n=r.replace(/^-/,"").replace(/-([a-z])/g,function(i,s){return s.toUpperCase()});t.style[n]=e[r]})}var Tm=function(){function t(e){this.velocityMultiplier=window.devicePixelRatio,this.updateTime=Date.now(),this.delta={x:0,y:0},this.velocity={x:0,y:0},this.lastPosition={x:0,y:0},this.lastPosition=qe(e)}return t.prototype.update=function(e){var r=this,n=r.velocity,i=r.updateTime,s=r.lastPosition,o=Date.now(),a=qe(e),c={x:-(a.x-s.x),y:-(a.y-s.y)},u=o-i||16.7,l=c.x/u*16.7,h=c.y/u*16.7;n.x=l*this.velocityMultiplier,n.y=h*this.velocityMultiplier,this.delta=c,this.updateTime=o,this.lastPosition=a},t}(),Om=function(){function t(){this._touchList={}}return Object.defineProperty(t.prototype,"_primitiveValue",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),t.prototype.isActive=function(){return this._activeTouchID!==void 0},t.prototype.getDelta=function(){var e=this._getActiveTracker();return e?ae({},e.delta):this._primitiveValue},t.prototype.getVelocity=function(){var e=this._getActiveTracker();return e?ae({},e.velocity):this._primitiveValue},t.prototype.getEasingDistance=function(e){var r=1-e,n={x:0,y:0},i=this.getVelocity();return Object.keys(i).forEach(function(s){for(var o=Math.abs(i[s])<=10?0:i[s];o!==0;)n[s]+=o,o=o*r|0}),n},t.prototype.track=function(e){var r=this,n=e.targetTouches;return Array.from(n).forEach(function(i){r._add(i)}),this._touchList},t.prototype.update=function(e){var r=this,n=e.touches,i=e.changedTouches;return Array.from(n).forEach(function(s){r._renew(s)}),this._setActiveID(i),this._touchList},t.prototype.release=function(e){var r=this;delete this._activeTouchID,Array.from(e.changedTouches).forEach(function(n){r._delete(n)})},t.prototype._add=function(e){this._has(e)&&this._delete(e);var r=new Tm(e);this._touchList[e.identifier]=r},t.prototype._renew=function(e){if(!!this._has(e)){var r=this._touchList[e.identifier];r.update(e)}},t.prototype._delete=function(e){delete this._touchList[e.identifier]},t.prototype._has=function(e){return this._touchList.hasOwnProperty(e.identifier)},t.prototype._setActiveID=function(e){this._activeTouchID=e[e.length-1].identifier},t.prototype._getActiveTracker=function(){var e=this,r=e._touchList,n=e._activeTouchID;return r[n]},t}(),Fe;(function(t){t.X="x",t.Y="y"})(Fe||(Fe={}));var xm=function(){function t(e,r){r===void 0&&(r=0),this._direction=e,this._minSize=r,this.element=document.createElement("div"),this.displaySize=0,this.realSize=0,this.offset=0,this.element.className="scrollbar-thumb scrollbar-thumb-"+e}return t.prototype.attachTo=function(e){e.appendChild(this.element)},t.prototype.update=function(e,r,n){this.realSize=Math.min(r/n,1)*r,this.displaySize=Math.max(this.realSize,this._minSize),this.offset=e/n*(r+(this.realSize-this.displaySize)),ke(this.element,this._getStyle())},t.prototype._getStyle=function(){switch(this._direction){case Fe.X:return{width:this.displaySize+"px","-transform":"translate3d("+this.offset+"px, 0, 0)"};case Fe.Y:return{height:this.displaySize+"px","-transform":"translate3d(0, "+this.offset+"px, 0)"};default:return null}},t}(),ps=function(){function t(e,r){r===void 0&&(r=0),this.element=document.createElement("div"),this._isShown=!1,this.element.className="scrollbar-track scrollbar-track-"+e,this.thumb=new xm(e,r),this.thumb.attachTo(this.element)}return t.prototype.attachTo=function(e){e.appendChild(this.element)},t.prototype.show=function(){this._isShown||(this._isShown=!0,this.element.classList.add("show"))},t.prototype.hide=function(){!this._isShown||(this._isShown=!1,this.element.classList.remove("show"))},t.prototype.update=function(e,r,n){ke(this.element,{display:n<=r?"none":"block"}),this.thumb.update(e,r,n)},t}(),km=function(){function t(e){this._scrollbar=e;var r=e.options.thumbMinSize;this.xAxis=new ps(Fe.X,r),this.yAxis=new ps(Fe.Y,r),this.xAxis.attachTo(e.containerEl),this.yAxis.attachTo(e.containerEl),e.options.alwaysShowTracks&&(this.xAxis.show(),this.yAxis.show())}return t.prototype.update=function(){var e=this._scrollbar,r=e.size,n=e.offset;this.xAxis.update(n.x,r.container.width,r.content.width),this.yAxis.update(n.y,r.container.height,r.content.height)},t.prototype.autoHideOnIdle=function(){this._scrollbar.options.alwaysShowTracks||(this.xAxis.hide(),this.yAxis.hide())},Ee([Jo(300)],t.prototype,"autoHideOnIdle",null),t}();function Am(t){var e=t.containerEl,r=t.contentEl,n=getComputedStyle(e),i=["paddingTop","paddingBottom","paddingLeft","paddingRight"].map(function(a){return n[a]?parseFloat(n[a]):0}),s=i[0]+i[1],o=i[2]+i[3];return{container:{width:e.clientWidth,height:e.clientHeight},content:{width:r.offsetWidth-r.clientWidth+r.scrollWidth+o,height:r.offsetHeight-r.clientHeight+r.scrollHeight+s}}}function Mm(t,e){var r=t.bounding,n=e.getBoundingClientRect(),i=Math.max(r.top,n.top),s=Math.max(r.left,n.left),o=Math.min(r.right,n.right),a=Math.min(r.bottom,n.bottom);return i<a&&s<o}function Cm(t){var e=t.getSize(),r={x:Math.max(e.content.width-e.container.width,0),y:Math.max(e.content.height-e.container.height,0)},n=t.containerEl.getBoundingClientRect(),i={top:Math.max(n.top,0),right:Math.min(n.right,window.innerWidth),bottom:Math.min(n.bottom,window.innerHeight),left:Math.max(n.left,0)};t.size=e,t.limit=r,t.bounding=i,t.track.update(),t.setPosition()}function jm(t,e,r){var n=t.options,i=t.offset,s=t.limit,o=t.track,a=t.contentEl;return n.renderByPixels&&(e=Math.round(e),r=Math.round(r)),e=X(e,0,s.x),r=X(r,0,s.y),e!==i.x&&o.xAxis.show(),r!==i.y&&o.yAxis.show(),n.alwaysShowTracks||o.autoHideOnIdle(),e===i.x&&r===i.y?null:(i.x=e,i.y=r,ke(a,{"-transform":"translate3d("+-e+"px, "+-r+"px, 0)"}),o.update(),{offset:ae({},i),limit:ae({},s)})}var ms=new WeakMap;function zm(t,e,r,n,i){n===void 0&&(n=0);var s=i===void 0?{}:i,o=s.easing,a=o===void 0?Rm:o,c=s.callback,u=t.options,l=t.offset,h=t.limit;u.renderByPixels&&(e=Math.round(e),r=Math.round(r));var d=l.x,f=l.y,p=X(e,0,h.x)-d,v=X(r,0,h.y)-f,g=Date.now();function b(){var m=Date.now()-g,S=n?a(Math.min(m/n,1)):1;if(t.setPosition(d+p*S,f+v*S),m>=n)typeof c=="function"&&c.call(t);else{var $=requestAnimationFrame(b);ms.set(t,$)}}cancelAnimationFrame(ms.get(t)),b()}function Rm(t){return Math.pow(t-1,3)+1}function qm(t,e,r){var n=r===void 0?{}:r,i=n.alignToTop,s=i===void 0?!0:i,o=n.onlyScrollIfNeeded,a=o===void 0?!1:o,c=n.offsetTop,u=c===void 0?0:c,l=n.offsetLeft,h=l===void 0?0:l,d=n.offsetBottom,f=d===void 0?0:d,p=t.containerEl,v=t.bounding,g=t.offset,b=t.limit;if(!(!e||!p.contains(e))){var m=e.getBoundingClientRect();if(!(a&&t.isVisible(e))){var S=s?m.top-v.top-u:m.bottom-v.bottom+f;t.setMomentum(m.left-v.left-h,X(S,-g.y,b.y-g.y))}}}var Lm=function(){function t(e,r){var n=this.constructor;this.scrollbar=e,this.name=n.pluginName,this.options=ae(ae({},n.defaultOptions),r)}return t.prototype.onInit=function(){},t.prototype.onDestroy=function(){},t.prototype.onUpdate=function(){},t.prototype.onRender=function(e){},t.prototype.transformDelta=function(e,r){return ae({},e)},t.pluginName="",t.defaultOptions={},t}(),Xt={order:new Set,constructors:{}};function Fm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(r){var n=r.pluginName;if(!n)throw new TypeError("plugin name is required");Xt.order.add(n),Xt.constructors[n]=r})}function Dm(t,e){return Array.from(Xt.order).filter(function(r){return e[r]!==!1}).map(function(r){var n=Xt.constructors[r],i=new n(t,e[r]);return e[r]=i.options,i})}var W;(function(t){t[t.TAB=9]="TAB",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN"})(W||(W={}));function Nm(t){var e=He(t),r=t.containerEl;e(r,"keydown",function(n){var i=document.activeElement;if(!(i!==r&&!r.contains(i))&&!Um(i)){var s=Bm(t,n.keyCode||n.which);if(!!s){var o=s[0],a=s[1];t.addTransformableMomentum(o,a,n,function(c){c?n.preventDefault():(t.containerEl.blur(),t.parent&&t.parent.containerEl.focus())})}}})}function Bm(t,e){var r=t.size,n=t.limit,i=t.offset;switch(e){case W.TAB:return Gm(t);case W.SPACE:return[0,200];case W.PAGE_UP:return[0,-r.container.height+40];case W.PAGE_DOWN:return[0,r.container.height-40];case W.END:return[0,n.y-i.y];case W.HOME:return[0,-i.y];case W.LEFT:return[-40,0];case W.UP:return[0,-40];case W.RIGHT:return[40,0];case W.DOWN:return[0,40];default:return null}}function Gm(t){requestAnimationFrame(function(){t.scrollIntoView(document.activeElement,{offsetTop:t.size.container.height/2,offsetLeft:t.size.container.width/2,onlyScrollIfNeeded:!0})})}function Um(t){return t.tagName==="INPUT"||t.tagName==="SELECT"||t.tagName==="TEXTAREA"||t.isContentEditable?!t.disabled:!1}var se;(function(t){t[t.X=0]="X",t[t.Y=1]="Y"})(se||(se={}));function Wm(t){var e=He(t),r=t.containerEl,n=t.track,i=n.xAxis,s=n.yAxis;function o(f,p){var v=t.size,g=t.limit,b=t.offset;if(f===se.X){var m=v.container.width+(i.thumb.realSize-i.thumb.displaySize);return X(p/m*v.content.width,0,g.x)-b.x}if(f===se.Y){var S=v.container.height+(s.thumb.realSize-s.thumb.displaySize);return X(p/S*v.content.height,0,g.y)-b.y}return 0}function a(f){if(Mt(f,[i.element,i.thumb.element]))return se.X;if(Mt(f,[s.element,s.thumb.element]))return se.Y}var c,u,l,h,d;e(r,"click",function(f){if(!(u||!Mt(f.target,[i.element,s.element]))){var p=f.target,v=a(p),g=p.getBoundingClientRect(),b=qe(f);if(v===se.X){var m=b.x-g.left-i.thumb.displaySize/2;t.setMomentum(o(v,m),0)}if(v===se.Y){var m=b.y-g.top-s.thumb.displaySize/2;t.setMomentum(0,o(v,m))}}}),e(r,"mousedown",function(f){if(!!Mt(f.target,[i.thumb.element,s.thumb.element])){c=!0;var p=f.target,v=qe(f),g=p.getBoundingClientRect();h=a(p),l={x:v.x-g.left,y:v.y-g.top},d=r.getBoundingClientRect(),ke(t.containerEl,{"-user-select":"none"})}}),e(window,"mousemove",function(f){if(!!c){u=!0;var p=qe(f);if(h===se.X){var v=p.x-l.x-d.left;t.setMomentum(o(h,v),0)}if(h===se.Y){var v=p.y-l.y-d.top;t.setMomentum(0,o(h,v))}}}),e(window,"mouseup blur",function(){c=u=!1,ke(t.containerEl,{"-user-select":""})})}function Hm(t){var e=He(t);e(window,"resize",Qo(t.update.bind(t),300))}function Vm(t){var e=He(t),r=t.containerEl,n=t.contentEl,i=!1,s=!1,o;function a(c){var u=c.x,l=c.y;if(!(!u&&!l)){var h=t.offset,d=t.limit;t.setMomentum(X(h.x+u,0,d.x)-h.x,X(h.y+l,0,d.y)-h.y),o=requestAnimationFrame(function(){a({x:u,y:l})})}}e(window,"mousemove",function(c){if(!!i){cancelAnimationFrame(o);var u=Xm(t,c);a(u)}}),e(n,"contextmenu",function(){s=!0,cancelAnimationFrame(o),i=!1}),e(n,"mousedown",function(){s=!1}),e(n,"selectstart",function(){s||(cancelAnimationFrame(o),i=!0)}),e(window,"mouseup blur",function(){cancelAnimationFrame(o),i=!1,s=!1}),e(r,"scroll",function(c){c.preventDefault(),r.scrollTop=r.scrollLeft=0})}function Xm(t,e){var r=t.bounding,n=r.top,i=r.right,s=r.bottom,o=r.left,a=qe(e),c=a.x,u=a.y,l={x:0,y:0},h=20;return c===0&&u===0||(c>i-h?l.x=c-i+h:c<o+h&&(l.x=c-o-h),u>s-h?l.y=u-s+h:u<n+h&&(l.y=u-n-h),l.x*=2,l.y*=2),l}var Ct;function Km(t){var e=t.options.delegateTo||t.containerEl,r=new Om,n=He(t),i,s=0;n(e,"touchstart",function(o){r.track(o),t.setMomentum(0,0),s===0&&(i=t.options.damping,t.options.damping=Math.max(i,.5)),s++}),n(e,"touchmove",function(o){if(!(Ct&&Ct!==t)){r.update(o);var a=r.getDelta(),c=a.x,u=a.y;t.addTransformableMomentum(c,u,o,function(l){l&&o.cancelable&&(o.preventDefault(),Ct=t)})}}),n(e,"touchcancel touchend",function(o){var a=r.getEasingDistance(i);t.addTransformableMomentum(a.x,a.y,o),s--,s===0&&(t.options.damping=i),r.release(o),Ct=null})}function Ym(t){var e=He(t),r=t.options.delegateTo||t.containerEl,n="onwheel"in window||document.implementation.hasFeature("Events.wheel","3.0")?"wheel":"mousewheel";e(r,n,function(i){var s=Jm(i),o=s.x,a=s.y;t.addTransformableMomentum(o,a,i,function(c){c&&i.preventDefault()})})}var Ze={STANDARD:1,OTHERS:-3},gs=[1,28,500],Qm=function(t){return gs[t]||gs[0]};function Jm(t){if("deltaX"in t){var e=Qm(t.deltaMode);return{x:t.deltaX/Ze.STANDARD*e,y:t.deltaY/Ze.STANDARD*e}}return"wheelDeltaX"in t?{x:t.wheelDeltaX/Ze.OTHERS,y:t.wheelDeltaY/Ze.OTHERS}:{x:0,y:t.wheelDelta/Ze.OTHERS}}const bs=Object.freeze(Object.defineProperty({__proto__:null,keyboardHandler:Nm,mouseHandler:Wm,resizeHandler:Hm,selectHandler:Vm,touchHandler:Km,wheelHandler:Ym},Symbol.toStringTag,{value:"Module"}));var oe=new Map,ys=function(){function t(e,r){var n=this;this.offset={x:0,y:0},this.limit={x:1/0,y:1/0},this.bounding={top:0,right:0,bottom:0,left:0},this._plugins=[],this._momentum={x:0,y:0},this._listeners=new Set,this.containerEl=e;var i=this.contentEl=document.createElement("div");this.options=new Sm(r),e.setAttribute("data-scrollbar","true"),e.setAttribute("tabindex","-1"),ke(e,{overflow:"hidden",outline:"none"}),window.navigator.msPointerEnabled&&(e.style.msTouchAction="none"),i.className="scroll-content",Array.from(e.childNodes).forEach(function(c){i.appendChild(c)}),e.appendChild(i),this.track=new km(this),this.size=this.getSize(),this._plugins=Dm(this,this.options.plugins);var s=e.scrollLeft,o=e.scrollTop;e.scrollLeft=e.scrollTop=0,this.setPosition(s,o,{withoutCallbacks:!0});var a=window.ResizeObserver;typeof a=="function"&&(this._observer=new a(function(){n.update()}),this._observer.observe(i)),oe.set(e,this),requestAnimationFrame(function(){n._init()})}return Object.defineProperty(t.prototype,"parent",{get:function(){for(var e=this.containerEl.parentElement;e;){var r=oe.get(e);if(r)return r;e=e.parentElement}return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.offset.y},set:function(e){this.setPosition(this.scrollLeft,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollLeft",{get:function(){return this.offset.x},set:function(e){this.setPosition(e,this.scrollTop)},enumerable:!0,configurable:!0}),t.prototype.getSize=function(){return Am(this)},t.prototype.update=function(){Cm(this),this._plugins.forEach(function(e){e.onUpdate()})},t.prototype.isVisible=function(e){return Mm(this,e)},t.prototype.setPosition=function(e,r,n){var i=this;e===void 0&&(e=this.offset.x),r===void 0&&(r=this.offset.y),n===void 0&&(n={});var s=jm(this,e,r);!s||n.withoutCallbacks||this._listeners.forEach(function(o){o.call(i,s)})},t.prototype.scrollTo=function(e,r,n,i){e===void 0&&(e=this.offset.x),r===void 0&&(r=this.offset.y),n===void 0&&(n=0),i===void 0&&(i={}),zm(this,e,r,n,i)},t.prototype.scrollIntoView=function(e,r){r===void 0&&(r={}),qm(this,e,r)},t.prototype.addListener=function(e){if(typeof e!="function")throw new TypeError("[smooth-scrollbar] scrolling listener should be a function");this._listeners.add(e)},t.prototype.removeListener=function(e){this._listeners.delete(e)},t.prototype.addTransformableMomentum=function(e,r,n,i){this._updateDebounced();var s=this._plugins.reduce(function(a,c){return c.transformDelta(a,n)||a},{x:e,y:r}),o=!this._shouldPropagateMomentum(s.x,s.y);o&&this.addMomentum(s.x,s.y),i&&i.call(this,o)},t.prototype.addMomentum=function(e,r){this.setMomentum(this._momentum.x+e,this._momentum.y+r)},t.prototype.setMomentum=function(e,r){this.limit.x===0&&(e=0),this.limit.y===0&&(r=0),this.options.renderByPixels&&(e=Math.round(e),r=Math.round(r)),this._momentum.x=e,this._momentum.y=r},t.prototype.updatePluginOptions=function(e,r){this._plugins.forEach(function(n){n.name===e&&Object.assign(n.options,r)})},t.prototype.destroy=function(){var e=this,r=e.containerEl,n=e.contentEl;Im(this),this._listeners.clear(),this.setMomentum(0,0),cancelAnimationFrame(this._renderID),this._observer&&this._observer.disconnect(),oe.delete(this.containerEl);for(var i=Array.from(n.childNodes);r.firstChild;)r.removeChild(r.firstChild);i.forEach(function(s){r.appendChild(s)}),ke(r,{overflow:""}),r.scrollTop=this.scrollTop,r.scrollLeft=this.scrollLeft,this._plugins.forEach(function(s){s.onDestroy()}),this._plugins.length=0},t.prototype._init=function(){var e=this;this.update(),Object.keys(bs).forEach(function(r){bs[r](e)}),this._plugins.forEach(function(r){r.onInit()}),this._render()},t.prototype._updateDebounced=function(){this.update()},t.prototype._shouldPropagateMomentum=function(e,r){e===void 0&&(e=0),r===void 0&&(r=0);var n=this,i=n.options,s=n.offset,o=n.limit;if(!i.continuousScrolling)return!1;o.x===0&&o.y===0&&this._updateDebounced();var a=X(e+s.x,0,o.x),c=X(r+s.y,0,o.y),u=!0;return u=u&&a===s.x,u=u&&c===s.y,u=u&&(s.x===o.x||s.x===0||s.y===o.y||s.y===0),u},t.prototype._render=function(){var e=this._momentum;if(e.x||e.y){var r=this._nextTick("x"),n=this._nextTick("y");e.x=r.momentum,e.y=n.momentum,this.setPosition(r.position,n.position)}var i=ae({},this._momentum);this._plugins.forEach(function(s){s.onRender(i)}),this._renderID=requestAnimationFrame(this._render.bind(this))},t.prototype._nextTick=function(e){var r=this,n=r.options,i=r.offset,s=r._momentum,o=i[e],a=s[e];if(Math.abs(a)<=.1)return{momentum:0,position:o+a};var c=a*(1-n.damping);return n.renderByPixels&&(c|=0),{momentum:c,position:o+a-c}},Ee([Jo(100,{leading:!0})],t.prototype,"_updateDebounced",null),t}(),Zm="rgba(222, 222, 222, .75)",eg="rgba(0, 0, 0, .5)",tg=`
[data-scrollbar] {
  display: block;
  position: relative;
}

.scroll-content {
  display: flow-root;
  -webkit-transform: translate3d(0, 0, 0);
          transform: translate3d(0, 0, 0);
}

.scrollbar-track {
  position: absolute;
  opacity: 0;
  z-index: 1;
  background: `+Zm+`;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  -webkit-transition: opacity 0.5s 0.5s ease-out;
          transition: opacity 0.5s 0.5s ease-out;
}
.scrollbar-track.show,
.scrollbar-track:hover {
  opacity: 1;
  -webkit-transition-delay: 0s;
          transition-delay: 0s;
}

.scrollbar-track-x {
  bottom: 0;
  left: 0;
  width: 100%;
  height: 8px;
}
.scrollbar-track-y {
  top: 0;
  right: 0;
  width: 8px;
  height: 100%;
}
.scrollbar-thumb {
  position: absolute;
  top: 0;
  left: 0;
  width: 8px;
  height: 8px;
  background: `+eg+`;
  border-radius: 4px;
}
`,ta="smooth-scrollbar-style",Kt=!1;function _s(){if(!(Kt||typeof window>"u")){var t=document.createElement("style");t.id=ta,t.textContent=tg,document.head&&document.head.appendChild(t),Kt=!0}}function rg(){if(!(!Kt||typeof window>"u")){var t=document.getElementById(ta);!t||!t.parentNode||(t.parentNode.removeChild(t),Kt=!1)}}var ng=function(t){Ma(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.init=function(r,n){if(!r||r.nodeType!==1)throw new TypeError("expect element to be DOM Element, but got "+r);return _s(),oe.has(r)?oe.get(r):new ys(r,n)},e.initAll=function(r){return Array.from(document.querySelectorAll("[data-scrollbar]"),function(n){return e.init(n,r)})},e.has=function(r){return oe.has(r)},e.get=function(r){return oe.get(r)},e.getAll=function(){return Array.from(oe.values())},e.destroy=function(r){var n=oe.get(r);n&&n.destroy()},e.destroyAll=function(){oe.forEach(function(r){r.destroy()})},e.use=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return Fm.apply(void 0,r)},e.attachStyle=function(){return _s()},e.detachStyle=function(){return rg()},e.version="8.8.1",e.ScrollbarPlugin=Lm,e}(ys);function ws(t,e,r){const n=t.slice();return n[5]=e[r],n[7]=r,n}function Ss(t){let e,r,n,i,s;function o(c){t[4](c)}let a={puzzle:t[2],moveIndex:t[7],failed:t[7]===t[1].failedMoveIndex};return t[0]!==void 0&&(a.activeFenIndex=t[0]),r=new qs({props:a}),ce.push(()=>Ie(r,"activeFenIndex",o)),{c(){e=I("div"),ue(r.$$.fragment),i=q(),_(e,"class","svelte-45trzg")},m(c,u){C(c,e,u),ee(r,e,null),w(e,i),s=!0},p(c,u){const l={};u&4&&(l.puzzle=c[2]),u&2&&(l.failed=c[7]===c[1].failedMoveIndex),!n&&u&1&&(n=!0,l.activeFenIndex=c[0],Se(()=>n=!1)),r.$set(l)},i(c){s||(k(r.$$.fragment,c),s=!0)},o(c){z(r.$$.fragment,c),s=!1},d(c){c&&A(e),te(r)}}}function ig(t){let e,r,n,i=t[2].san_moves,s=[];for(let a=0;a<i.length;a+=1)s[a]=Ss(ws(t,i,a));const o=a=>z(s[a],1,1,()=>{s[a]=null});return{c(){e=I("div");for(let a=0;a<s.length;a+=1)s[a].c();_(e,"id","line"),_(e,"class",r=Bt(t[3])+" svelte-45trzg"),_e(e,"scrollbar",t[3]==="column")},m(a,c){C(a,e,c);for(let u=0;u<s.length;u+=1)s[u].m(e,null);n=!0},p(a,[c]){if(c&7){i=a[2].san_moves;let u;for(u=0;u<i.length;u+=1){const l=ws(a,i,u);s[u]?(s[u].p(l,c),k(s[u],1)):(s[u]=Ss(l),s[u].c(),k(s[u],1),s[u].m(e,null))}for(it(),u=i.length;u<s.length;u+=1)o(u);st()}(!n||c&8&&r!==(r=Bt(a[3])+" svelte-45trzg"))&&_(e,"class",r),(!n||c&8)&&_e(e,"scrollbar",a[3]==="column")},i(a){if(!n){for(let c=0;c<i.length;c+=1)k(s[c]);n=!0}},o(a){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)z(s[c]);n=!1},d(a){a&&A(e),we(s,a)}}}function sg(t,e,r){let{game:n}=e,{puzzle:i}=e,{activeFenIndex:s}=e,{direction:o="column"}=e;Rs(()=>{document.querySelector(".scrollbar")&&ng.init(document.querySelector(".scrollbar"),{})});function a(c){s=c,r(0,s)}return t.$$set=c=>{"game"in c&&r(1,n=c.game),"puzzle"in c&&r(2,i=c.puzzle),"activeFenIndex"in c&&r(0,s=c.activeFenIndex),"direction"in c&&r(3,o=c.direction)},[s,n,i,o,a]}class ra extends ge{constructor(e){super(),me(this,e,sg,ig,pe,{game:1,puzzle:2,activeFenIndex:0,direction:3})}}const og="/noboardchess/assets/chevron_right.7ea5f89f.svg",ag="/noboardchess/assets/chevron_left.5f0c5e3b.svg",cg="/noboardchess/assets/first_page.f5439e4d.svg",ug="/noboardchess/assets/last_page.06c0e9ba.svg",lg="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",fg="8/8/8/8/8/8/8/8",tt={start:lg,empty:fg};class j{constructor(e=void 0){this.squares=new Array(64).fill(null),this.setFen(e)}setFen(e=tt.empty){let r;e==="start"?(console.warn("setting the position with the strings 'start' or 'empty' is deprecated, use FEN.start or FEN.empty"),r=tt.start):e==="empty"||e===void 0?(console.warn("setting the position with the strings 'start' or 'empty' is deprecated, use FEN.start or FEN.empty"),r=tt.empty):r=e;const n=r.replace(/^\s*/,"").replace(/\s*$/,"").split(/\/|\s/);for(let i=0;i<8;i++){const s=n[7-i].replace(/\d/g,o=>{const a=parseInt(o);let c="";for(let u=0;u<a;u++)c+="-";return c});for(let o=0;o<8;o++){const a=s.substring(o,o+1);let c=null;a!=="-"&&(a.toUpperCase()===a?c=`w${a.toLowerCase()}`:c=`b${a}`),this.squares[i*8+o]=c}}}getFen(){let e=new Array(8).fill("");for(let r=0;r<8;r++){let n=0;for(let i=0;i<8;i++){const s=this.squares[r*8+i];if(!s)n++;else{n>0&&(e[7-r]+=n,n=0);const o=s.substring(0,1),a=s.substring(1,2);o==="w"?e[7-r]+=a.toUpperCase():e[7-r]+=a}}n>0&&(e[7-r]+=n,n=0)}return e.join("/")}getPieces(e=["k","q","r","b","n","p"]){const r=[],n=(i,s)=>e.indexOf(i.name)-e.indexOf(s.name);for(let i=0;i<64;i++){const s=this.squares[i];s&&r.push({name:s.charAt(1),color:s.charAt(0),position:j.indexToSquare(i)})}return e&&r.sort(n),r}movePiece(e,r){if(!this.squares[j.squareToIndex(e)]){console.warn("no piece on",e);return}this.squares[j.squareToIndex(r)]=this.squares[j.squareToIndex(e)],this.squares[j.squareToIndex(e)]=void 0}setPiece(e,r){this.squares[j.squareToIndex(e)]=r}getPiece(e){return this.squares[j.squareToIndex(e)]}static squareToIndex(e){const r=e.substring(0,1).charCodeAt(0)-97,n=e.substring(1,2)-1;return 8*n+r}static indexToSquare(e){const r=String.fromCharCode(e%8+97),n=Math.floor(e/8)+1;return r+n}clone(){const e=new j;return e.squares=this.squares.slice(0),e}}function na(){let t,e;const r=new Promise(function(n,i){t=n,e=i});return r.resolve=t,r.reject=e,r}class hg{constructor(){this.position=new j,this.orientation=void 0,this.markers=[],this.inputWhiteEnabled=!1,this.inputBlackEnabled=!1,this.inputEnabled=!1,this.squareSelectEnabled=!1,this.extensionPoints={},this.moveInputProcess=na().resolve()}setPosition(e,r=!1){this.position=new j(e,r)}movePiece(e,r,n=!1){const i=this._position.clone();i.animated=n;const s=i.getPiece(e);s||console.error("no piece on",e),i.setPiece(e,void 0),i.setPiece(r,s),this._position=i}setPiece(e,r,n=!1){const i=this._position.clone();i.animated=n,i.setPiece(e,r),this._position=i}addMarker(e,r){this.markers.push({square:e,type:r})}removeMarkers(e=void 0,r=void 0){!e&&!r?this.markers=[]:this.markers=this.markers.filter(n=>{if(r){if(e){if(n.type===r&&e===n.square)return!1}else if(n.type===r)return!1}else if(e===n.square)return!1;return!0})}invokeExtensionPoints(e,r={}){const n=this.extensionPoints[e],i=Object.assign({},r);if(i.extensionPoint=e,n)for(const s of n)setTimeout(()=>{s(i)})}}const y={waitForInputStart:0,pieceClickedThreshold:1,clickTo:2,secondClickThreshold:3,dragTo:4,clickDragTo:5,moveDone:6,reset:7},jt={secondClick:"secondClick",movedOutOfBoard:"movedOutOfBoard",draggedBack:"draggedBack",clickedAnotherPiece:"clickedAnotherPiece"},Is=4;class dg{constructor(e,r,n,i){this.view=e,this.chessboard=e.chessboard,this.moveInputStartedCallback=s=>{const o=r(s);return o&&(this.chessboard.state.moveInputProcess=na()),o},this.validateMoveInputCallback=(s,o)=>{const a=n(s,o);return this.chessboard.state.moveInputProcess.resolve(a),a},this.moveInputCanceledCallback=(s,o,a)=>{i(s,o,a),this.chessboard.state.moveInputProcess.resolve()},this.setMoveInputState(y.waitForInputStart)}setMoveInputState(e,r=void 0){const n=this.moveInputState;switch(this.moveInputState=e,e){case y.waitForInputStart:break;case y.pieceClickedThreshold:if(y.waitForInputStart!==n&&y.clickTo!==n)throw new Error("moveInputState");if(this.pointerMoveListener&&(removeEventListener(this.pointerMoveListener.type,this.pointerMoveListener),this.pointerMoveListener=void 0),this.pointerUpListener&&(removeEventListener(this.pointerUpListener.type,this.pointerUpListener),this.pointerUpListener=void 0),this.fromSquare=r.square,this.toSquare=void 0,this.movedPiece=r.piece,this.updateStartEndMarkers(),this.startPoint=r.point,!this.pointerMoveListener&&!this.pointerUpListener)if(r.type==="mousedown")this.pointerMoveListener=this.onPointerMove.bind(this),this.pointerMoveListener.type="mousemove",addEventListener("mousemove",this.pointerMoveListener),this.pointerUpListener=this.onPointerUp.bind(this),this.pointerUpListener.type="mouseup",addEventListener("mouseup",this.pointerUpListener);else if(r.type==="touchstart")this.pointerMoveListener=this.onPointerMove.bind(this),this.pointerMoveListener.type="touchmove",addEventListener("touchmove",this.pointerMoveListener),this.pointerUpListener=this.onPointerUp.bind(this),this.pointerUpListener.type="touchend",addEventListener("touchend",this.pointerUpListener);else throw Error("event type");else throw Error("_pointerMoveListener or _pointerUpListener");break;case y.clickTo:this.draggablePiece&&(M.removeElement(this.draggablePiece),this.draggablePiece=void 0),n===y.dragTo&&this.view.setPieceVisibility(r.square,!0);break;case y.secondClickThreshold:if(y.clickTo!==n)throw new Error("moveInputState");this.startPoint=r.point;break;case y.dragTo:if(y.pieceClickedThreshold!==n)throw new Error("moveInputState");this.view.chessboard.state.inputEnabled&&(this.view.setPieceVisibility(r.square,!1),this.createDraggablePiece(r.piece));break;case y.clickDragTo:if(y.secondClickThreshold!==n)throw new Error("moveInputState");this.view.chessboard.state.inputEnabled&&(this.view.setPieceVisibility(r.square,!1),this.createDraggablePiece(r.piece));break;case y.moveDone:if([y.dragTo,y.clickTo,y.clickDragTo].indexOf(n)===-1)throw new Error("moveInputState");this.toSquare=r.square,this.toSquare&&this.validateMoveInputCallback(this.fromSquare,this.toSquare)?n===y.clickTo?this.chessboard.movePiece(this.fromSquare,this.toSquare,!0).then(()=>{this.setMoveInputState(y.reset)}):this.chessboard.movePiece(this.fromSquare,this.toSquare,!1).then(()=>{this.view.setPieceVisibility(this.toSquare,!0),this.setMoveInputState(y.reset)}):(this.view.setPieceVisibility(this.fromSquare,!0),this.setMoveInputState(y.reset));break;case y.reset:this.fromSquare&&!this.toSquare&&this.movedPiece&&this.chessboard.state.position.setPiece(this.fromSquare,this.movedPiece),this.fromSquare=void 0,this.toSquare=void 0,this.movedPiece=void 0,this.updateStartEndMarkers(),this.draggablePiece&&(M.removeElement(this.draggablePiece),this.draggablePiece=void 0),this.pointerMoveListener&&(removeEventListener(this.pointerMoveListener.type,this.pointerMoveListener),this.pointerMoveListener=void 0),this.pointerUpListener&&(removeEventListener(this.pointerUpListener.type,this.pointerUpListener),this.pointerUpListener=void 0),this.setMoveInputState(y.waitForInputStart);break;default:throw Error(`moveInputState ${e}`)}}createDraggablePiece(e){if(this.draggablePiece)throw Error("draggablePiece exists");this.draggablePiece=M.createSvg(document.body),this.draggablePiece.classList.add("cm-chessboard-draggable-piece"),this.draggablePiece.setAttribute("width",this.view.squareWidth),this.draggablePiece.setAttribute("height",this.view.squareHeight),this.draggablePiece.setAttribute("style","pointer-events: none"),this.draggablePiece.name=e;const r=this.chessboard.props.sprite.cache?"":this.chessboard.props.sprite.url,n=M.addElement(this.draggablePiece,"use",{href:`${r}#${e}`}),i=this.view.squareHeight/this.chessboard.props.sprite.size,s=this.draggablePiece.createSVGTransform();s.setScale(i,i),n.transform.baseVal.appendItem(s)}moveDraggablePiece(e,r){this.draggablePiece.setAttribute("style",`pointer-events: none; position: absolute; left: ${e-this.view.squareHeight/2}px; top: ${r-this.view.squareHeight/2}px`)}onPointerDown(e){if(e.type==="mousedown"&&e.button===0||e.type==="touchstart"){const r=e.target.getAttribute("data-square");if(r){const n=this.chessboard.getPiece(r);let i;if(n&&(i=n?n.substring(0,1):void 0,(i==="w"&&this.chessboard.state.inputWhiteEnabled||i==="b"&&this.chessboard.state.inputBlackEnabled)&&e.preventDefault()),this.moveInputState!==y.waitForInputStart||this.chessboard.state.inputWhiteEnabled&&i==="w"||this.chessboard.state.inputBlackEnabled&&i==="b"){let s;if(e.type==="mousedown"?s={x:e.clientX,y:e.clientY}:e.type==="touchstart"&&(s={x:e.touches[0].clientX,y:e.touches[0].clientY}),this.moveInputState===y.waitForInputStart&&n&&this.moveInputStartedCallback(r))this.setMoveInputState(y.pieceClickedThreshold,{square:r,piece:n,point:s,type:e.type});else if(this.moveInputState===y.clickTo)if(r===this.fromSquare)this.setMoveInputState(y.secondClickThreshold,{square:r,piece:n,point:s,type:e.type});else{const o=this.chessboard.getPiece(r),a=o?o.substring(0,1):void 0,c=this.chessboard.getPiece(this.fromSquare),u=c?c.substring(0,1):void 0;i&&u===a?(this.moveInputCanceledCallback(jt.clickedAnotherPiece,this.fromSquare,r),this.moveInputStartedCallback(r)?this.setMoveInputState(y.pieceClickedThreshold,{square:r,piece:o,point:s,type:e.type}):this.setMoveInputState(y.reset)):this.setMoveInputState(y.moveDone,{square:r})}}}}}onPointerMove(e){let r,n,i,s,o;if(e.type==="mousemove"?(i=e.clientX,s=e.clientY,r=e.pageX,n=e.pageY,o=e.target):e.type==="touchmove"&&(i=e.touches[0].clientX,s=e.touches[0].clientY,r=e.touches[0].pageX,n=e.touches[0].pageY,o=document.elementFromPoint(i,s)),this.moveInputState===y.pieceClickedThreshold||this.moveInputState===y.secondClickThreshold)(Math.abs(this.startPoint.x-i)>Is||Math.abs(this.startPoint.y-s)>Is)&&(this.moveInputState===y.secondClickThreshold?this.setMoveInputState(y.clickDragTo,{square:this.fromSquare,piece:this.movedPiece}):this.setMoveInputState(y.dragTo,{square:this.fromSquare,piece:this.movedPiece}),this.view.chessboard.state.inputEnabled&&this.moveDraggablePiece(r,n));else if(this.moveInputState===y.dragTo||this.moveInputState===y.clickDragTo||this.moveInputState===y.clickTo){if(o&&o.getAttribute&&o.parentElement===this.view.boardGroup){const a=o.getAttribute("data-square");a!==this.fromSquare&&a!==this.toSquare?(this.toSquare=a,this.updateStartEndMarkers()):a===this.fromSquare&&this.toSquare!==void 0&&(this.toSquare=void 0,this.updateStartEndMarkers())}else this.toSquare!==void 0&&(this.toSquare=void 0,this.updateStartEndMarkers());this.view.chessboard.state.inputEnabled&&(this.moveInputState===y.dragTo||this.moveInputState===y.clickDragTo)&&this.moveDraggablePiece(r,n)}}onPointerUp(e){let r;if(e.type==="mouseup"?r=e.target:e.type==="touchend"&&(r=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY)),r&&r.getAttribute){const n=r.getAttribute("data-square");if(n)this.moveInputState===y.dragTo||this.moveInputState===y.clickDragTo?this.fromSquare===n?this.moveInputState===y.clickDragTo?(this.chessboard.state.position.setPiece(this.fromSquare,this.movedPiece),this.view.setPieceVisibility(this.fromSquare),this.moveInputCanceledCallback(jt.draggedBack,n,n),this.setMoveInputState(y.reset)):this.setMoveInputState(y.clickTo,{square:n}):this.setMoveInputState(y.moveDone,{square:n}):this.moveInputState===y.pieceClickedThreshold?this.setMoveInputState(y.clickTo,{square:n}):this.moveInputState===y.secondClickThreshold&&(this.setMoveInputState(y.reset),this.moveInputCanceledCallback(jt.secondClick,n,n));else{this.view.redrawPieces();const i=this.fromSquare;this.setMoveInputState(y.reset),this.moveInputCanceledCallback(jt.movedOutOfBoard,i,void 0)}}else this.view.redrawPieces(),this.setMoveInputState(y.reset)}updateStartEndMarkers(){this.chessboard.props.style.moveFromMarker&&this.chessboard.state.removeMarkers(void 0,this.chessboard.props.style.moveFromMarker),this.chessboard.props.style.moveToMarker&&this.chessboard.state.removeMarkers(void 0,this.chessboard.props.style.moveToMarker),this.chessboard.props.style.moveFromMarker&&this.fromSquare&&this.chessboard.state.addMarker(this.fromSquare,this.chessboard.props.style.moveFromMarker),this.chessboard.props.style.moveToMarker&&this.toSquare&&this.chessboard.state.addMarker(this.toSquare,this.chessboard.props.style.moveToMarker),this.view.drawMarkers()}reset(){this.setMoveInputState(y.reset)}destroy(){this.reset()}}const V={positionChanged:"positionChanged",boardChanged:"boardChanged",moveInputToggled:"moveInputToggled",moveInput:"moveInput",moveInputStateChanged:"moveInput",destroy:"destroy",redrawBoard:"redrawBoard"};class vg{constructor(e){this.chessboard=e,this.moveInput=new dg(this,this.moveInputStartedCallback.bind(this),this.validateMoveInputCallback.bind(this),this.moveInputCanceledCallback.bind(this)),e.props.sprite.cache&&this.cacheSpriteToDiv("chessboardSpriteCache",this.chessboard.props.sprite.url),this.context=document.createElement("div"),this.chessboard.context.appendChild(this.context),e.props.responsive&&(typeof ResizeObserver<"u"?(this.resizeObserver=new ResizeObserver(()=>{this.handleResize()}),this.resizeObserver.observe(this.chessboard.context)):(this.resizeListener=this.handleResize.bind(this),window.addEventListener("resize",this.resizeListener))),this.pointerDownListener=this.pointerDownHandler.bind(this),this.pointerDownListener=this.pointerDownHandler.bind(this),this.context.addEventListener("mousedown",this.pointerDownListener),this.context.addEventListener("touchstart",this.pointerDownListener),this.createSvgAndGroups(),this.updateMetrics(),this.handleResize(),this.redrawBoard()}pointerDownHandler(e){this.moveInput.onPointerDown(e)}destroy(){this.moveInput.destroy(),this.resizeObserver&&this.resizeObserver.unobserve(this.chessboard.context),this.resizeListener&&window.removeEventListener("resize",this.resizeListener),this.chessboard.context.removeEventListener("mousedown",this.pointerDownListener),this.chessboard.context.removeEventListener("touchstart",this.pointerDownListener),this.animationQueue=[],this.currentAnimation&&cancelAnimationFrame(this.currentAnimation.frameHandle),M.removeElement(this.svg)}cacheSpriteToDiv(e,r){if(!document.getElementById(e)){const n=document.createElement("div");n.style.display="none",n.id=e,document.body.appendChild(n);const i=new XMLHttpRequest;i.open("GET",r,!0),i.onload=function(){n.insertAdjacentHTML("afterbegin",i.response)},i.send()}}createSvgAndGroups(){this.svg=M.createSvg(this.context);let e=this.chessboard.props.style.cssClass?this.chessboard.props.style.cssClass:"default";this.svg.setAttribute("class","cm-chessboard border-type-"+this.chessboard.props.style.borderType+" "+e),this.svg.setAttribute("role","img"),this.updateMetrics(),this.boardGroup=M.addElement(this.svg,"g",{class:"board"}),this.coordinatesGroup=M.addElement(this.svg,"g",{class:"coordinates"}),this.markersLayer=M.addElement(this.svg,"g",{class:"markers-layer"}),this.markersGroup=M.addElement(this.markersLayer,"g",{class:"markers"}),this.piecesLayer=M.addElement(this.svg,"g",{class:"pieces-layer"}),this.piecesGroup=M.addElement(this.piecesLayer,"g",{class:"pieces"})}updateMetrics(){this.width=this.context.clientWidth,this.height=this.context.clientWidth*(this.chessboard.props.style.aspectRatio||1),this.chessboard.props.style.borderType===je.frame?this.borderSize=this.width/25:this.chessboard.props.style.borderType===je.thin?this.borderSize=this.width/320:this.borderSize=0,this.innerWidth=this.width-2*this.borderSize,this.innerHeight=this.height-2*this.borderSize,this.squareWidth=this.innerWidth/8,this.squareHeight=this.innerHeight/8,this.scalingX=this.squareWidth/this.chessboard.props.sprite.size,this.scalingY=this.squareHeight/this.chessboard.props.sprite.size,this.pieceXTranslate=this.squareWidth/2-this.chessboard.props.sprite.size*this.scalingY/2}handleResize(){this.context.style.width=this.chessboard.context.clientWidth+"px",this.context.style.height=this.chessboard.context.clientWidth*this.chessboard.props.style.aspectRatio+"px",(this.context.clientWidth!==this.width||this.context.clientHeight!==this.height)&&(this.updateMetrics(),this.redrawBoard(),this.redrawPieces()),this.svg.setAttribute("width","100%"),this.svg.setAttribute("height","100%")}redrawBoard(){this.redrawSquares(),this.drawCoordinates(),this.drawMarkers(),this.chessboard.state.invokeExtensionPoints(V.redrawBoard),this.visualizeInputState()}redrawSquares(){for(;this.boardGroup.firstChild;)this.boardGroup.removeChild(this.boardGroup.lastChild);if(M.addElement(this.boardGroup,"rect",{width:this.width,height:this.height}).setAttribute("class","border"),this.chessboard.props.style.borderType===je.frame){const r=this.borderSize;M.addElement(this.boardGroup,"rect",{x:r,y:r,width:this.width-r*2,height:this.height-r*2}).setAttribute("class","border-inner")}for(let r=0;r<64;r++){const n=this.chessboard.state.orientation===fe.white?r:63-r,s=`square ${(9*n&8)===0?"black":"white"}`,o=this.squareToPoint(j.indexToSquare(n)),a=M.addElement(this.boardGroup,"rect",{x:o.x,y:o.y,width:this.squareWidth,height:this.squareHeight});a.setAttribute("class",s),a.setAttribute("data-square",j.indexToSquare(n))}}drawCoordinates(){if(!this.chessboard.props.style.showCoordinates)return;for(;this.coordinatesGroup.firstChild;)this.coordinatesGroup.removeChild(this.coordinatesGroup.lastChild);const e=this.chessboard.props.style.borderType!==je.frame;for(let r=0;r<8;r++){let n=this.borderSize+(17+this.chessboard.props.sprite.size*r)*this.scalingX,i=this.height-this.scalingY*3.5,s="coordinate file";e&&(n=n+this.scalingX*15.5,s+=r%2?" white":" black");const o=M.addElement(this.coordinatesGroup,"text",{class:s,x:n,y:i,style:`font-size: ${this.scalingY*10}px`});this.chessboard.state.orientation===fe.white?o.textContent=String.fromCharCode(97+r):o.textContent=String.fromCharCode(104-r)}for(let r=0;r<8;r++){let n=this.borderSize/3.7,i=this.borderSize+25*this.scalingY+r*this.squareHeight,s="coordinate rank";e&&(s+=r%2?" black":" white",this.chessboard.props.style.borderType===je.frame?(n=n+this.scalingX*10,i=i-this.scalingY*15):(n=n+this.scalingX*2,i=i-this.scalingY*15));const o=M.addElement(this.coordinatesGroup,"text",{class:s,x:n,y:i,style:`font-size: ${this.scalingY*10}px`});this.chessboard.state.orientation===fe.white?o.textContent=""+(8-r):o.textContent=""+(1+r)}}redrawPieces(e=this.chessboard.state.position.squares){const r=Array.from(this.piecesGroup.childNodes);for(let n=0;n<64;n++){const i=e[n];i&&this.drawPiece(j.indexToSquare(n),i)}for(const n of r)this.piecesGroup.removeChild(n)}drawPiece(e,r){const n=M.addElement(this.piecesGroup,"g");n.setAttribute("data-piece",r),n.setAttribute("data-square",e);const i=this.squareToPoint(e),s=this.svg.createSVGTransform();s.setTranslate(i.x,i.y),n.transform.baseVal.appendItem(s);const o=this.chessboard.props.sprite.cache?"":this.chessboard.props.sprite.url,a=M.addElement(n,"use",{href:`${o}#${r}`,class:"piece"}),c=this.svg.createSVGTransform();c.setTranslate(this.pieceXTranslate,0),a.transform.baseVal.appendItem(c);const u=this.svg.createSVGTransform();return u.setScale(this.scalingY,this.scalingY),a.transform.baseVal.appendItem(u),n}setPieceVisibility(e,r=!0){const n=this.getPieceElement(e);n?r?n.setAttribute("visibility","visible"):n.setAttribute("visibility","hidden"):console.warn("no piece on",e)}getPieceElement(e){if(e.length<2)throw new Error("980e03");const r=this.piecesGroup.querySelector(`g[data-square='${e}']`);return r||console.warn("no piece on",e),r}drawMarkers(){for(;this.markersGroup.firstChild;)this.markersGroup.removeChild(this.markersGroup.firstChild);this.chessboard.state.markers.forEach(e=>{this.drawMarker(e)})}drawMarker(e){const r=M.addElement(this.markersGroup,"g");r.setAttribute("data-square",e.square);const n=this.squareToPoint(e.square),i=this.svg.createSVGTransform();i.setTranslate(n.x,n.y),r.transform.baseVal.appendItem(i);const s=this.chessboard.props.sprite.cache?"":this.chessboard.props.sprite.url,o=M.addElement(r,"use",{href:`${s}#${e.type.slice}`,class:"marker "+e.type.class}),a=this.svg.createSVGTransform();return a.setScale(this.scalingX,this.scalingY),o.transform.baseVal.appendItem(a),r}enableMoveInput(e,r=void 0){r===fe.white?this.chessboard.state.inputWhiteEnabled=!0:r===fe.black?this.chessboard.state.inputBlackEnabled=!0:(this.chessboard.state.inputWhiteEnabled=!0,this.chessboard.state.inputBlackEnabled=!0),this.chessboard.state.inputEnabled=!0,this.moveInputCallback=e,this.chessboard.state.invokeExtensionPoints(V.moveInputToggled,{enabled:!0,color:r}),this.visualizeInputState()}disableMoveInput(){this.chessboard.state.inputWhiteEnabled=!1,this.chessboard.state.inputBlackEnabled=!1,this.chessboard.state.inputEnabled=!1,this.moveInputCallback=void 0,this.chessboard.state.invokeExtensionPoints(V.moveInputToggled,{enabled:!1}),this.visualizeInputState()}moveInputStartedCallback(e){const r={chessboard:this.chessboard,type:Ar.moveInputStarted,square:e};return this.chessboard.state.invokeExtensionPoints(V.moveInput,r),this.moveInputCallback?this.moveInputCallback(r):!0}validateMoveInputCallback(e,r){const n={chessboard:this.chessboard,type:Ar.validateMoveInput,squareFrom:e,squareTo:r};return this.chessboard.state.invokeExtensionPoints(V.moveInput,n),this.moveInputCallback?this.moveInputCallback(n):!0}moveInputCanceledCallback(e,r,n){const i={chessboard:this.chessboard,type:Ar.moveInputCanceled,reason:e,squareFrom:r,squareTo:n};this.chessboard.state.invokeExtensionPoints(V.moveInput,i),this.moveInputCallback&&this.moveInputCallback(i)}visualizeInputState(){this.chessboard.state&&(this.chessboard.state.inputWhiteEnabled||this.chessboard.state.inputBlackEnabled||this.chessboard.state.squareSelectEnabled?this.boardGroup.setAttribute("class","board input-enabled"):this.boardGroup.setAttribute("class","board"))}indexToPoint(e){let r,n;return this.chessboard.state.orientation===fe.white?(r=this.borderSize+e%8*this.squareWidth,n=this.borderSize+(7-Math.floor(e/8))*this.squareHeight):(r=this.borderSize+(7-e%8)*this.squareWidth,n=this.borderSize+Math.floor(e/8)*this.squareHeight),{x:r,y:n}}squareToPoint(e){const r=j.squareToIndex(e);return this.indexToPoint(r)}}const $s="http://www.w3.org/2000/svg";class M{static createSvg(e=void 0){let r=document.createElementNS($s,"svg");return e&&(r.setAttribute("width","100%"),r.setAttribute("height","100%"),e.appendChild(r)),r}static addElement(e,r,n,i=void 0){let s=document.createElementNS($s,r);r==="use"&&(n["xlink:href"]=n.href);for(let o in n)if(n.hasOwnProperty(o))if(o.indexOf(":")!==-1){const a=o.split(":");s.setAttributeNS("http://www.w3.org/1999/"+a[0],a[1],n[o])}else s.setAttribute(o,n[o]);return i!==void 0?e.appendChild(s):e.insertBefore(s,i),s}static removeElement(e){e.parentNode?e.parentNode.removeChild(e):console.warn(e,"without parentNode")}}class pg{constructor(){this.queue=[],this.workingOnPromise=!1,this.stop=!1}async enqueue(e){return new Promise((r,n)=>{this.queue.push({promise:e,resolve:r,reject:n}),this.dequeue()})}dequeue(){if(this.workingOnPromise)return;if(this.stop){this.queue=[],this.stop=!1;return}const e=this.queue.shift();if(!!e){try{this.workingOnPromise=!0,e.promise().then(r=>{this.workingOnPromise=!1,e.resolve(r),this.dequeue()}).catch(r=>{this.workingOnPromise=!1,e.reject(r),this.dequeue()})}catch(r){this.workingOnPromise=!1,e.reject(r),this.dequeue()}return!0}}destroy(){this.stop=!0}}const ie={move:0,appear:1,disappear:2};class Le{constructor(e,r,n,i,s){this.view=e,r&&n?(this.animatedElements=this.createAnimation(r.squares,n.squares),this.duration=i,this.callback=s,this.frameHandle=requestAnimationFrame(this.animationStep.bind(this))):console.error("fromPosition",r,"toPosition",n)}static seekChanges(e,r){const n=[],i=[],s=[];for(let o=0;o<64;o++){const a=e[o],c=r[o];c!==a&&(c&&n.push({piece:c,index:o}),a&&i.push({piece:a,index:o}))}return n.forEach(o=>{let a=8,c;i.forEach(u=>{if(o.piece===u.piece){const l=Le.squareDistance(o.index,u.index);l<a&&(c=u,a=l)}}),c?(i.splice(i.indexOf(c),1),s.push({type:ie.move,piece:o.piece,atIndex:c.index,toIndex:o.index})):s.push({type:ie.appear,piece:o.piece,atIndex:o.index})}),i.forEach(o=>{s.push({type:ie.disappear,piece:o.piece,atIndex:o.index})}),s}createAnimation(e,r){const n=Le.seekChanges(e,r),i=[];return n.forEach(s=>{const o={type:s.type};switch(s.type){case ie.move:o.element=this.view.getPieceElement(j.indexToSquare(s.atIndex)),o.element.parentNode.appendChild(o.element),o.atPoint=this.view.indexToPoint(s.atIndex),o.toPoint=this.view.indexToPoint(s.toIndex);break;case ie.appear:o.element=this.view.drawPiece(j.indexToSquare(s.atIndex),s.piece),o.element.style.opacity=0;break;case ie.disappear:o.element=this.view.getPieceElement(j.indexToSquare(s.atIndex));break}i.push(o)}),i}animationStep(e){this.startTime||(this.startTime=e);const r=e-this.startTime;if(r<=this.duration)this.frameHandle=requestAnimationFrame(this.animationStep.bind(this));else{cancelAnimationFrame(this.frameHandle),this.animatedElements.forEach(s=>{s.type===ie.disappear&&M.removeElement(s.element)}),this.callback();return}const n=Math.min(1,r/this.duration);let i=n<.5?2*n*n:-1+(4-2*n)*n;isNaN(i)&&(i=1),this.animatedElements.forEach(s=>{if(s.element)switch(s.type){case ie.move:s.element.transform.baseVal.removeItem(0);const o=this.view.svg.createSVGTransform();o.setTranslate(s.atPoint.x+(s.toPoint.x-s.atPoint.x)*i,s.atPoint.y+(s.toPoint.y-s.atPoint.y)*i),s.element.transform.baseVal.appendItem(o);break;case ie.appear:s.element.style.opacity=Math.round(i*100)/100;break;case ie.disappear:s.element.style.opacity=Math.round((1-i)*100)/100;break}else console.warn("animatedItem has no element",s)})}static squareDistance(e,r){const n=e%8,i=Math.floor(e/8),s=r%8,o=Math.floor(r/8);return Math.max(Math.abs(o-i),Math.abs(s-n))}}class mg extends pg{constructor(e){super(),this.chessboard=e}async enqueuePositionChange(e,r,n){return e.getFen()===r.getFen()?Promise.resolve():super.enqueue(()=>new Promise(i=>{let s=n?this.chessboard.props.animationDuration:0;this.queue.length>0&&(s=s/(1+Math.pow(this.queue.length/5,2))),new Le(this.chessboard.view,e,r,n?s:0,()=>{this.chessboard.view&&this.chessboard.view.redrawPieces(r.squares),i()})}))}async enqueueTurnBoard(e,r,n){return super.enqueue(()=>new Promise(i=>{const s=new j(tt.empty);let o=n?this.chessboard.props.animationDuration:0;this.queue.length>0&&(o=o/(1+Math.pow(this.queue.length/5,2))),new Le(this.chessboard.view,e,s,n?o:0,()=>{this.chessboard.state.orientation=r,this.chessboard.view.redrawBoard(),this.chessboard.view.redrawPieces(s.squares),new Le(this.chessboard.view,s,e,n?o:0,()=>{this.chessboard.view.redrawPieces(e.squares),i()})})}))}}const fe={white:"w",black:"b"},Ar={moveStart:"moveInputStarted",moveInputStarted:"moveInputStarted",moveDone:"validateMoveInput",validateMoveInput:"validateMoveInput",moveCanceled:"moveInputCanceled",moveInputCanceled:"moveInputCanceled"},Es={primary:"primary",secondary:"secondary"},je={none:"none",thin:"thin",frame:"frame"},Ps={frame:{class:"marker-frame",slice:"markerFrame"},square:{class:"marker-square",slice:"markerSquare"},dot:{class:"marker-dot",slice:"markerDot"},circle:{class:"marker-circle",slice:"markerCircle"}};class gg{constructor(e,r={}){if(!e)throw new Error("container element is "+e);this.context=e,this.id=(Math.random()+1).toString(36).substring(2,8),this.extensions=[];let n={position:tt.empty,orientation:fe.white,responsive:!0,animationDuration:300,language:navigator.language.substring(0,2).toLowerCase(),style:{cssClass:"default",showCoordinates:!0,borderType:je.none,aspectRatio:1,moveFromMarker:Ps.frame,moveToMarker:Ps.frame},sprite:{url:"./assets/images/chessboard-sprite.svg",size:40,cache:!0},extensions:[]};this.props={},Object.assign(this.props,n),Object.assign(this.props,r),this.props.sprite=n.sprite,this.props.style=n.style,r.sprite&&Object.assign(this.props.sprite,r.sprite),r.style&&Object.assign(this.props.style,r.style),r.extensions&&(this.props.extensions=r.extensions),this.props.language!=="de"&&this.props.language!=="en"&&(this.props.language="en"),this.state=new hg,this.view=new vg(this),this.positionAnimationsQueue=new mg(this),this.state.orientation=this.props.orientation;for(const i of this.props.extensions)this.extensions.push(new i.class(this,i.props));this.view.redrawBoard(),this.state.position=new j(this.props.position),this.view.redrawPieces(),this.state.invokeExtensionPoints(V.positionChanged)}async setPiece(e,r,n=!1){const i=this.state.position.clone();return this.state.position.setPiece(e,r),this.state.invokeExtensionPoints(V.positionChanged),this.positionAnimationsQueue.enqueuePositionChange(i,this.state.position.clone(),n)}async movePiece(e,r,n=!1){const i=this.state.position.clone();return this.state.position.movePiece(e,r),this.state.invokeExtensionPoints(V.positionChanged),this.positionAnimationsQueue.enqueuePositionChange(i,this.state.position.clone(),n)}async setPosition(e,r=!1){const n=this.state.position.clone(),i=new j(e);return n.getFen()!==i.getFen()&&(this.state.position.setFen(e),this.state.invokeExtensionPoints(V.positionChanged)),this.positionAnimationsQueue.enqueuePositionChange(n,this.state.position.clone(),r)}async setOrientation(e,r=!1){const n=this.state.position.clone();if(this.boardTurning){console.log("setOrientation is only once in queue allowed");return}return this.boardTurning=!0,this.positionAnimationsQueue.enqueueTurnBoard(n,e,r).then(()=>{this.boardTurning=!1,this.state.invokeExtensionPoints(V.boardChanged)})}getPiece(e){return this.state.position.getPiece(e)}getPosition(){return this.state.position.getFen()}getOrientation(){return this.state.orientation}addMarker(e,r){if(typeof e=="string"||typeof r=="object"){console.error("changed the signature of `addMarker` to `(type, square)` with v5.1.x");return}this.state.addMarker(r,e),this.view.drawMarkers()}getMarkers(e=void 0,r=void 0){if(typeof e=="string"||typeof r=="object"){console.error("changed the signature of `getMarkers` to `(type, square)` with v5.1.x");return}const n=[];return this.state.markers.forEach(i=>{const s=i.square;(!r&&(!e||e===i.type)||!e&&r===s||e===i.type&&r===s)&&n.push({square:i.square,type:i.type})}),n}removeMarkers(e=void 0,r=void 0){if(typeof e=="string"||typeof r=="object"){console.error("changed the signature of `removeMarkers` to `(type, square)` with v5.1.x");return}this.state.removeMarkers(r,e),this.view.drawMarkers()}enableMoveInput(e,r=void 0){this.view.enableMoveInput(e,r)}disableMoveInput(){this.view.disableMoveInput()}enableSquareSelect(e){if(this.squareSelectListener){console.warn("squareSelectListener already existing");return}this.squareSelectListener=function(r){const n=r.target.getAttribute("data-square");if(r.type==="contextmenu"){r.preventDefault();return}e({chessboard:this,type:r.button===2?Es.secondary:Es.primary,square:n})},this.context.addEventListener("contextmenu",this.squareSelectListener),this.context.addEventListener("mouseup",this.squareSelectListener),this.context.addEventListener("touchend",this.squareSelectListener),this.state.squareSelectEnabled=!0,this.view.visualizeInputState()}disableSquareSelect(){this.context.removeEventListener("contextmenu",this.squareSelectListener),this.context.removeEventListener("mouseup",this.squareSelectListener),this.context.removeEventListener("touchend",this.squareSelectListener),this.squareSelectListener=void 0,this.state.squareSelectEnabled=!1,this.view.visualizeInputState()}destroy(){this.state.invokeExtensionPoints(V.destroy),this.positionAnimationsQueue.destroy(),this.view.destroy(),this.view=void 0,this.state=void 0,this.squareSelectListener&&(this.context.removeEventListener("contextmenu",this.squareSelectListener),this.context.removeEventListener("mouseup",this.squareSelectListener),this.context.removeEventListener("touchend",this.squareSelectListener))}}const bg="/noboardchess/assets/chessboard-sprite-staunty.485981d8.svg";function yg(t){let e,r,n,i,s,o,a,c,u,l,h,d,f,p,v,g,b,m,S,$,D;return{c(){e=I("div"),r=I("div"),r.innerHTML='<div id="chessboard"></div>',n=q(),i=I("div"),s=I("button"),o=I("img"),c=q(),u=I("button"),l=I("img"),d=q(),f=I("button"),p=I("img"),g=q(),b=I("button"),m=I("img"),_(r,"id","container"),_(r,"class","svelte-1g5yj9o"),Pe(o.src,a=cg)||_(o,"src",a),_(o,"alt","first"),_(o,"class","svelte-1g5yj9o"),Pe(l.src,h=ag)||_(l,"src",h),_(l,"alt","prev"),_(l,"class","svelte-1g5yj9o"),Pe(p.src,v=og)||_(p,"src",v),_(p,"alt","next"),_(p,"class","svelte-1g5yj9o"),Pe(m.src,S=ug)||_(m,"src",S),_(m,"alt","last"),_(m,"class","svelte-1g5yj9o"),_(i,"id","controls"),_(i,"class","svelte-1g5yj9o"),_(e,"id","board"),_(e,"class","svelte-1g5yj9o")},m(T,x){C(T,e,x),w(e,r),w(e,n),w(e,i),w(i,s),w(s,o),w(i,c),w(i,u),w(u,l),w(i,d),w(i,f),w(f,p),w(i,g),w(i,b),w(b,m),$||(D=[he(s,"click",t[0]),he(u,"click",t[1]),he(f,"click",t[2]),he(b,"click",t[3])],$=!0)},p:O,i:O,o:O,d(T){T&&A(e),$=!1,De(D)}}}function _g(t,e,r){let n,{game:i}=e,{puzzle:s}=e;Rs(()=>{r(7,n=new gg(document.getElementById("chessboard"),{position:s.fen,orientation:s.fen.split(" ")[1]==="b"?fe.white:fe.black,sprite:{url:bg},style:{cssClass:"black-and-white"}}))});let{activeFenIndex:o=0}=e;const a=()=>{r(4,o=0)},c=()=>{o&&r(4,o--,o)},u=()=>{o<s.san_moves.length&&r(4,o++,o)},l=()=>{r(4,o=s.san_moves.length)};return t.$$set=h=>{"game"in h&&r(5,i=h.game),"puzzle"in h&&r(6,s=h.puzzle),"activeFenIndex"in h&&r(4,o=h.activeFenIndex)},t.$$.update=()=>{t.$$.dirty&208&&n&&n.setPosition(s.fens[o],!0)},[a,c,u,l,o,i,s,n]}class wg extends ge{constructor(e){super(),me(this,e,_g,yg,pe,{game:5,puzzle:6,activeFenIndex:4})}}function Sg(t){let e,r,n;function i(o){t[8](o)}let s={game:t[0],puzzle:t[1],direction:"column"};return t[2]!==void 0&&(s.activeFenIndex=t[2]),e=new ra({props:s}),ce.push(()=>Ie(e,"activeFenIndex",i)),{c(){ue(e.$$.fragment)},m(o,a){ee(e,o,a),n=!0},p(o,a){const c={};a&1&&(c.game=o[0]),a&2&&(c.puzzle=o[1]),!r&&a&4&&(r=!0,c.activeFenIndex=o[2],Se(()=>r=!1)),e.$set(c)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){te(e,o)}}}function Ig(t){let e,r,n;function i(o){t[7](o)}let s={game:t[0],puzzle:t[1],direction:"row"};return t[2]!==void 0&&(s.activeFenIndex=t[2]),e=new ra({props:s}),ce.push(()=>Ie(e,"activeFenIndex",i)),{c(){ue(e.$$.fragment)},m(o,a){ee(e,o,a),n=!0},p(o,a){const c={};a&1&&(c.game=o[0]),a&2&&(c.puzzle=o[1]),!r&&a&4&&(r=!0,c.activeFenIndex=o[2],Se(()=>r=!1)),e.$set(c)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){te(e,o)}}}function $g(t){let e,r,n,i,s,o,a,c,u,l,h;Gt(t[4]);function d(m){t[5](m)}function f(m){t[6](m)}let p={puzzle:t[1]};t[0]!==void 0&&(p.game=t[0]),t[2]!==void 0&&(p.activeFenIndex=t[2]),r=new wg({props:p}),ce.push(()=>Ie(r,"game",d)),ce.push(()=>Ie(r,"activeFenIndex",f));const v=[Ig,Sg],g=[];function b(m,S){return m[3]<Mr?0:1}return a=b(t),c=g[a]=v[a](t),{c(){e=I("div"),ue(r.$$.fragment),s=q(),o=I("div"),c.c(),_(e,"id","answer"),_(e,"class","svelte-cm1e28"),zn(e,"flex-direction",t[3]<Mr?"column":"row",!1)},m(m,S){C(m,e,S),ee(r,e,null),w(e,s),w(e,o),g[a].m(o,null),u=!0,l||(h=he(window,"resize",t[4]),l=!0)},p(m,[S]){const $={};S&2&&($.puzzle=m[1]),!n&&S&1&&(n=!0,$.game=m[0],Se(()=>n=!1)),!i&&S&4&&(i=!0,$.activeFenIndex=m[2],Se(()=>i=!1)),r.$set($);let D=a;a=b(m),a===D?g[a].p(m,S):(it(),z(g[D],1,1,()=>{g[D]=null}),st(),c=g[a],c?c.p(m,S):(c=g[a]=v[a](m),c.c()),k(c,1),c.m(o,null)),S&8&&zn(e,"flex-direction",m[3]<Mr?"column":"row",!1)},i(m){u||(k(r.$$.fragment,m),k(c),u=!0)},o(m){z(r.$$.fragment,m),z(c),u=!1},d(m){m&&A(e),te(r),g[a].d(),l=!1,h()}}}const Mr=800;function Eg(t,e,r){let{puzzle:n}=e,{game:i}=e,s=0,o;function a(){r(3,o=window.innerWidth)}function c(d){i=d,r(0,i)}function u(d){s=d,r(2,s)}function l(d){s=d,r(2,s)}function h(d){s=d,r(2,s)}return t.$$set=d=>{"puzzle"in d&&r(1,n=d.puzzle),"game"in d&&r(0,i=d.game)},[i,n,s,o,a,c,u,l,h]}class Pg extends ge{constructor(e){super(),me(this,e,Eg,$g,pe,{puzzle:1,game:0})}}const Tg="/noboardchess/assets/heart.8da15a2b.svg",Og="/noboardchess/assets/broken_heart.dc79b59f.svg";function Ts(t,e,r){const n=t.slice();return n[4]=e[r],n}function Os(t,e,r){const n=t.slice();return n[4]=e[r],n}function xs(t){let e,r;return{c(){e=I("img"),Pe(e.src,r=Tg)||_(e,"src",r),_(e,"alt","heart"),_(e,"class","heart svelte-1xhoy2m")},m(n,i){C(n,e,i)},p:O,d(n){n&&A(e)}}}function ks(t){let e,r;return{c(){e=I("img"),Pe(e.src,r=Og)||_(e,"src",r),_(e,"alt","broken heart"),_(e,"class","broken-heart svelte-1xhoy2m")},m(n,i){C(n,e,i)},p:O,d(n){n&&A(e)}}}function As(t){let e;function r(s,o){return s[0].fails<s[0].lives?kg:xg}let n=r(t),i=n(t);return{c(){i.c(),e=js()},m(s,o){i.m(s,o),C(s,e,o)},p(s,o){n===(n=r(s))&&i?i.p(s,o):(i.d(1),i=n(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){i.d(s),s&&A(e)}}}function xg(t){let e,r,n;return{c(){e=I("button"),e.textContent="restart"},m(i,s){C(i,e,s),r||(n=he(e,"click",t[3]),r=!0)},p:O,d(i){i&&A(e),r=!1,n()}}}function kg(t){let e,r,n;return{c(){e=I("button"),e.textContent="next"},m(i,s){C(i,e,s),r||(n=he(e,"click",t[2]),r=!0)},p:O,d(i){i&&A(e),r=!1,n()}}}function Ag(t){let e,r,n,i=t[0].level+"",s,o,a,c,u,l,h,d,f,p,v=t[1].elo+"",g,b,m,S,$=t[1].n_pieces+"",D,T=Array(t[0].lives-t[0].fails),x=[];for(let E=0;E<T.length;E+=1)x[E]=xs(Os(t,T,E));let U=Array(t[0].fails),F=[];for(let E=0;E<U.length;E+=1)F[E]=ks(Ts(t,U,E));let B=!t[0].guessing&&As(t);return{c(){e=I("div"),r=I("div"),n=H("#"),s=H(i),o=q(),a=I("div");for(let E=0;E<x.length;E+=1)x[E].c();c=q();for(let E=0;E<F.length;E+=1)F[E].c();u=q(),B&&B.c(),l=q(),h=I("div"),d=I("ul"),f=I("li"),p=H("Rating: "),g=H(v),b=q(),m=I("li"),S=H("Number of pieces: "),D=H($),_(r,"id","level"),_(r,"class","svelte-1xhoy2m"),_(a,"id","lives"),_(a,"class","svelte-1xhoy2m"),_(d,"class","svelte-1xhoy2m"),_(h,"class","svelte-1xhoy2m"),_(e,"id","infos"),_(e,"class","svelte-1xhoy2m")},m(E,ne){C(E,e,ne),w(e,r),w(r,n),w(r,s),w(e,o),w(e,a);for(let P=0;P<x.length;P+=1)x[P].m(a,null);w(a,c);for(let P=0;P<F.length;P+=1)F[P].m(a,null);w(e,u),B&&B.m(e,null),w(e,l),w(e,h),w(h,d),w(d,f),w(f,p),w(f,g),w(d,b),w(d,m),w(m,S),w(m,D)},p(E,[ne]){if(ne&1&&i!==(i=E[0].level+"")&&Re(s,i),ne&1){T=Array(E[0].lives-E[0].fails);let P;for(P=0;P<T.length;P+=1){const tr=Os(E,T,P);x[P]?x[P].p(tr,ne):(x[P]=xs(),x[P].c(),x[P].m(a,c))}for(;P<x.length;P+=1)x[P].d(1);x.length=T.length}if(ne&1){U=Array(E[0].fails);let P;for(P=0;P<U.length;P+=1){const tr=Ts(E,U,P);F[P]?F[P].p(tr,ne):(F[P]=ks(),F[P].c(),F[P].m(a,null))}for(;P<F.length;P+=1)F[P].d(1);F.length=U.length}E[0].guessing?B&&(B.d(1),B=null):B?B.p(E,ne):(B=As(E),B.c(),B.m(e,l)),ne&2&&v!==(v=E[1].elo+"")&&Re(g,v),ne&2&&$!==($=E[1].n_pieces+"")&&Re(D,$)},i:O,o:O,d(E){E&&A(e),we(x,E),we(F,E),B&&B.d()}}}function Mg(t,e,r){let{puzzle:n}=e,{game:i}=e;const s=()=>{r(0,i.guessing=!0,i),r(0,i.level++,i)},o=()=>{r(0,i.guessing=!0,i),r(0,i.level=1,i),r(0,i.fails=0,i)};return t.$$set=a=>{"puzzle"in a&&r(1,n=a.puzzle),"game"in a&&r(0,i=a.game)},[i,n,s,o]}class Cg extends ge{constructor(e){super(),me(this,e,Mg,Ag,pe,{puzzle:1,game:0})}}function jg(t){return{c:O,m:O,p:O,i:O,o:O,d:O}}function zg(t){let e,r,n,i,s,o,a;function c(f){t[3](f)}let u={puzzle:t[7]};t[0]!==void 0&&(u.game=t[0]),e=new Cg({props:u}),ce.push(()=>Ie(e,"game",c));const l=[qg,Rg],h=[];function d(f,p){return f[0].guessing?0:1}return i=d(t),s=h[i]=l[i](t),{c(){ue(e.$$.fragment),n=q(),s.c(),o=js()},m(f,p){ee(e,f,p),C(f,n,p),h[i].m(f,p),C(f,o,p),a=!0},p(f,p){const v={};p&2&&(v.puzzle=f[7]),!r&&p&1&&(r=!0,v.game=f[0],Se(()=>r=!1)),e.$set(v);let g=i;i=d(f),i===g?h[i].p(f,p):(it(),z(h[g],1,1,()=>{h[g]=null}),st(),s=h[i],s?s.p(f,p):(s=h[i]=l[i](f),s.c()),k(s,1),s.m(o.parentNode,o))},i(f){a||(k(e.$$.fragment,f),k(s),a=!0)},o(f){z(e.$$.fragment,f),z(s),a=!1},d(f){te(e,f),f&&A(n),h[i].d(f),f&&A(o)}}}function Rg(t){let e,r,n;function i(o){t[5](o)}let s={puzzle:t[7]};return t[0]!==void 0&&(s.game=t[0]),e=new Pg({props:s}),ce.push(()=>Ie(e,"game",i)),{c(){ue(e.$$.fragment)},m(o,a){ee(e,o,a),n=!0},p(o,a){const c={};a&2&&(c.puzzle=o[7]),!r&&a&1&&(r=!0,c.game=o[0],Se(()=>r=!1)),e.$set(c)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){te(e,o)}}}function qg(t){let e,r,n,i,s;e=new Pa({props:{pieces:t[7].pieces}});function o(c){t[4](c)}let a={puzzle:t[7]};return t[0]!==void 0&&(a.game=t[0]),n=new Aa({props:a}),ce.push(()=>Ie(n,"game",o)),{c(){ue(e.$$.fragment),r=q(),ue(n.$$.fragment)},m(c,u){ee(e,c,u),C(c,r,u),ee(n,c,u),s=!0},p(c,u){const l={};u&2&&(l.pieces=c[7].pieces),e.$set(l);const h={};u&2&&(h.puzzle=c[7]),!i&&u&1&&(i=!0,h.game=c[0],Se(()=>i=!1)),n.$set(h)},i(c){s||(k(e.$$.fragment,c),k(n.$$.fragment,c),s=!0)},o(c){z(e.$$.fragment,c),z(n.$$.fragment,c),s=!1},d(c){te(e,c),c&&A(r),te(n,c)}}}function Lg(t){return{c:O,m:O,p:O,i:O,o:O,d:O}}function Fg(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!1,pending:Lg,then:zg,catch:jg,value:7,blocks:[,,,]};return Rn(r=t[1],i),{c(){e=I("div"),i.block.c(),_(e,"id","game")},m(s,o){C(s,e,o),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=null,n=!0},p(s,[o]){t=s,i.ctx=t,o&2&&r!==(r=t[1])&&Rn(r,i)||la(i,t,o)},i(s){n||(k(i.block),n=!0)},o(s){for(let o=0;o<3;o+=1){const a=i.blocks[o];z(a)}n=!1},d(s){s&&A(e),i.block.d(),i.token=null,i=null}}}function Dg(t,e,r){let n=1;const i=async()=>{const l=await fetch(`https://valenbel123.pythonanywhere.com/level/${n}`),h=await l.json();if(l.ok)return console.log(h),h;throw new Error(h)};let s=i(),o={failedMoveIndex:null,guessing:!0,level:n,lives:3,fails:0};function a(l){o=l,r(0,o)}function c(l){o=l,r(0,o)}function u(l){o=l,r(0,o)}return t.$$.update=()=>{t.$$.dirty&5&&n<o.level&&(r(2,n=o.level),r(1,s=i()))},[o,s,n,a,c,u]}class Ng extends ge{constructor(e){super(),me(this,e,Dg,Fg,pe,{})}}function Bg(t){let e,r;return e=new Ng({}),{c(){ue(e.$$.fragment)},m(n,i){ee(e,n,i),r=!0},p:O,i(n){r||(k(e.$$.fragment,n),r=!0)},o(n){z(e.$$.fragment,n),r=!1},d(n){te(e,n)}}}class Gg extends ge{constructor(e){super(),me(this,e,null,Bg,pe,{})}}new Gg({target:document.getElementById("app")});
